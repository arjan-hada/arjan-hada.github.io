<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Identify Fraud From Enron Data</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Arjan's Blog </a></h1>
                <nav><ul>
                    <li class="active"><a href="/category/data-analyst-nanodegree.html">Data-Analyst-Nanodegree</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/enron-fraud.html" rel="bookmark"
           title="Permalink to Identify Fraud From Enron Data">Identify Fraud From Enron Data</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-11-27T00:00:00-06:00">
                Published: Sun 27 November 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/arjan-hada.html">Arjan Hada</a>
        </address>
<p>In <a href="/category/data-analyst-nanodegree.html">Data-Analyst-Nanodegree</a>.</p>
<p>tags: <a href="/tag/scikit-learn.html">scikit-learn</a> <a href="/tag/machine-learning.html">machine learning</a> <a href="/tag/natural-language-processing.html">natural language processing</a> <a href="/tag/feature-selection.html">feature selection</a> <a href="/tag/verifying-machine-learning-performance.html">verifying machine learning performance</a> </p>
</footer><!-- /.post-info -->      <style type="text/css">/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI colors. */
.ansibold {
  font-weight: bold;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  border-left-width: 1px;
  padding-left: 5px;
  background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%);
}
div.cell.jupyter-soft-selected {
  border-left-color: #90CAF9;
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected {
  border-color: #ababab;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%);
}
@media print {
  div.cell.selected {
    border-color: transparent;
  }
}
div.cell.selected.jupyter-soft-selected {
  border-left-width: 0;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 7px, #E3F2FD 7px, #E3F2FD 100%);
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #66BB6A -40px, #66BB6A 5px, transparent 5px, transparent 100%);
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell > div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area > div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area > div.highlight > pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the <head> if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  padding: 0.4em;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. We need the 0 value because of how we size */
  /* .CodeMirror-lines */
  padding: 0;
  border: 0;
  border-radius: 0;
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}


.rendered_html pre,



.rendered_html tr,
.rendered_html th,

.rendered_html td,


.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,

div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell > div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
</style>
<style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style>
<style type="text/css">
/* Temporary definitions which will become obsolete with Notebook release 5.0 */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img alt="enron_fraud" src="images/enron_fraud.jpg" />
<br />
Source: <a href="https://amazingtradingacademydotcom.files.wordpress.com/2016/11/enron-newsweek.jpg">Newsweek</a></p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Understanding-the-Dataset-and-Question">Understanding the Dataset and Question<a class="anchor-link" href="#Understanding-the-Dataset-and-Question">¶</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p>Summarize for us the goal of this project and how machine learning is useful in trying to accomplish it. As part of your answer, give some background on the dataset and how it can be used to answer the project question. Were there any outliers in the data when you got it, and how did you handle those?</p>
</blockquote>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Introduction">Introduction<a class="anchor-link" href="#Introduction">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The Enron fraud is the largest case of corporate fraud in American history. Founded in 1985, Enron Corporation went bankrupt by end of 2001 due to widespread corporate fraud and corruption. Before its fall, Fortune magazine had named Enron "America's most innovative company" for six consecutive years. So what happened? Who were the culprits?</p>
<p>In this project, I will play detective and build a classification algorithm to predict a person of interest identifier (POI) based on email and financial features in the combined dataset. A POI is anyone who has been indicted, settled without admitting the guilt and testified in exchange for immunity. We will check our predicted POI against actual POI in the dataset to evaluate our prediction.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"../tools/"</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">feature_format</span> <span class="kn">import</span> <span class="n">featureFormat</span><span class="p">,</span> <span class="n">targetFeatureSplit</span>
<span class="kn">from</span> <span class="nn">tester_plus</span> <span class="kn">import</span> <span class="n">dump_classifier_and_data</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>/Users/arjanhada/anaconda3/envs/py2/lib/python2.7/site-packages/sklearn/cross_validation.py:44: DeprecationWarning: This module was deprecated in version 0.18 in favor of the model_selection module into which all the refactored classes and functions are moved. Also note that the interface of the new CV iterators are different from that of this module. This module will be removed in 0.20.
  "This module will be removed in 0.20.", DeprecationWarning)
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1">### Load the dictionary containing the dataset</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"final_project_dataset.pkl"</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">data_file</span><span class="p">:</span>
    <span class="n">data_dict</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">data_file</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">enron_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data_dict</span><span class="p">,</span> <span class="n">orient</span> <span class="o">=</span> <span class="s1">'index'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Data-Exploration">Data Exploration<a class="anchor-link" href="#Data-Exploration">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Lets print few lines from the dataset.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">enron_data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[4]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>salary</th>
<th>to_messages</th>
<th>deferral_payments</th>
<th>total_payments</th>
<th>exercised_stock_options</th>
<th>bonus</th>
<th>restricted_stock</th>
<th>shared_receipt_with_poi</th>
<th>restricted_stock_deferred</th>
<th>total_stock_value</th>
<th>...</th>
<th>loan_advances</th>
<th>from_messages</th>
<th>other</th>
<th>from_this_person_to_poi</th>
<th>poi</th>
<th>director_fees</th>
<th>deferred_income</th>
<th>long_term_incentive</th>
<th>email_address</th>
<th>from_poi_to_this_person</th>
</tr>
</thead>
<tbody>
<tr>
<th>ALLEN PHILLIP K</th>
<td>201955</td>
<td>2902</td>
<td>2869717</td>
<td>4484442</td>
<td>1729541</td>
<td>4175000</td>
<td>126027</td>
<td>1407</td>
<td>-126027</td>
<td>1729541</td>
<td>...</td>
<td>NaN</td>
<td>2195</td>
<td>152</td>
<td>65</td>
<td>False</td>
<td>NaN</td>
<td>-3081055</td>
<td>304805</td>
<td>phillip.allen@enron.com</td>
<td>47</td>
</tr>
<tr>
<th>BADUM JAMES P</th>
<td>NaN</td>
<td>NaN</td>
<td>178980</td>
<td>182466</td>
<td>257817</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>257817</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>False</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>BANNANTINE JAMES M</th>
<td>477</td>
<td>566</td>
<td>NaN</td>
<td>916197</td>
<td>4046157</td>
<td>NaN</td>
<td>1757552</td>
<td>465</td>
<td>-560222</td>
<td>5243487</td>
<td>...</td>
<td>NaN</td>
<td>29</td>
<td>864523</td>
<td>0</td>
<td>False</td>
<td>NaN</td>
<td>-5104</td>
<td>NaN</td>
<td>james.bannantine@enron.com</td>
<td>39</td>
</tr>
<tr>
<th>BAXTER JOHN C</th>
<td>267102</td>
<td>NaN</td>
<td>1295738</td>
<td>5634343</td>
<td>6680544</td>
<td>1200000</td>
<td>3942714</td>
<td>NaN</td>
<td>NaN</td>
<td>10623258</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>2660303</td>
<td>NaN</td>
<td>False</td>
<td>NaN</td>
<td>-1386055</td>
<td>1586055</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>BAY FRANKLIN R</th>
<td>239671</td>
<td>NaN</td>
<td>260455</td>
<td>827696</td>
<td>NaN</td>
<td>400000</td>
<td>145796</td>
<td>NaN</td>
<td>-82782</td>
<td>63014</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>69</td>
<td>NaN</td>
<td>False</td>
<td>NaN</td>
<td>-201641</td>
<td>NaN</td>
<td>frank.bay@enron.com</td>
<td>NaN</td>
</tr>
</tbody>
</table>
<p>5 rows × 21 columns</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">print</span> <span class="s2">"There are a total of {} people in the dataset."</span> <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">enron_data</span><span class="o">.</span><span class="n">index</span><span class="p">))</span> 
<span class="k">print</span> <span class="s2">"Out of which {} are POI and {} Non-POI."</span> <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">enron_data</span><span class="p">[</span><span class="s1">'poi'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()[</span><span class="bp">True</span><span class="p">],</span> 
                                                 <span class="n">enron_data</span><span class="p">[</span><span class="s1">'poi'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()[</span><span class="bp">False</span><span class="p">])</span>
<span class="k">print</span> <span class="s2">"Total number of email plus financial features are {}. 'poi' column is our label."</span> \
<span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">enron_data</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>There are a total of 146 people in the dataset.
Out of which 18 are POI and 128 Non-POI.
Total number of email plus financial features are 20. 'poi' column is our label.
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Enron dataset is really messy and has a lot of missing values (NaN). All the features have missing values. Some features have more than 50% of their values missing, as we can see from the frequency of NaN from the table below. NaNs are coerced to 0 for training our algorithm later.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [6]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">enron_data</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[6]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>count</th>
<th>unique</th>
<th>top</th>
<th>freq</th>
</tr>
</thead>
<tbody>
<tr>
<th>salary</th>
<td>146</td>
<td>95</td>
<td>NaN</td>
<td>51</td>
</tr>
<tr>
<th>to_messages</th>
<td>146</td>
<td>87</td>
<td>NaN</td>
<td>60</td>
</tr>
<tr>
<th>deferral_payments</th>
<td>146</td>
<td>40</td>
<td>NaN</td>
<td>107</td>
</tr>
<tr>
<th>total_payments</th>
<td>146</td>
<td>126</td>
<td>NaN</td>
<td>21</td>
</tr>
<tr>
<th>exercised_stock_options</th>
<td>146</td>
<td>102</td>
<td>NaN</td>
<td>44</td>
</tr>
<tr>
<th>bonus</th>
<td>146</td>
<td>42</td>
<td>NaN</td>
<td>64</td>
</tr>
<tr>
<th>restricted_stock</th>
<td>146</td>
<td>98</td>
<td>NaN</td>
<td>36</td>
</tr>
<tr>
<th>shared_receipt_with_poi</th>
<td>146</td>
<td>84</td>
<td>NaN</td>
<td>60</td>
</tr>
<tr>
<th>restricted_stock_deferred</th>
<td>146</td>
<td>19</td>
<td>NaN</td>
<td>128</td>
</tr>
<tr>
<th>total_stock_value</th>
<td>146</td>
<td>125</td>
<td>NaN</td>
<td>20</td>
</tr>
<tr>
<th>expenses</th>
<td>146</td>
<td>95</td>
<td>NaN</td>
<td>51</td>
</tr>
<tr>
<th>loan_advances</th>
<td>146</td>
<td>5</td>
<td>NaN</td>
<td>142</td>
</tr>
<tr>
<th>from_messages</th>
<td>146</td>
<td>65</td>
<td>NaN</td>
<td>60</td>
</tr>
<tr>
<th>other</th>
<td>146</td>
<td>93</td>
<td>NaN</td>
<td>53</td>
</tr>
<tr>
<th>from_this_person_to_poi</th>
<td>146</td>
<td>42</td>
<td>NaN</td>
<td>60</td>
</tr>
<tr>
<th>poi</th>
<td>146</td>
<td>2</td>
<td>False</td>
<td>128</td>
</tr>
<tr>
<th>director_fees</th>
<td>146</td>
<td>18</td>
<td>NaN</td>
<td>129</td>
</tr>
<tr>
<th>deferred_income</th>
<td>146</td>
<td>45</td>
<td>NaN</td>
<td>97</td>
</tr>
<tr>
<th>long_term_incentive</th>
<td>146</td>
<td>53</td>
<td>NaN</td>
<td>80</td>
</tr>
<tr>
<th>email_address</th>
<td>146</td>
<td>112</td>
<td>NaN</td>
<td>35</td>
</tr>
<tr>
<th>from_poi_to_this_person</th>
<td>146</td>
<td>58</td>
<td>NaN</td>
<td>60</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [7]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">enron_data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">to_replace</span><span class="o">=</span><span class="s1">'NaN'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Outlier-investigation">Outlier investigation<a class="anchor-link" href="#Outlier-investigation">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Visualization is one of the most powerful tools for finding outliers. Upon plotting salary against bonus, there is an outlier that pops out immediately - "TOTAL" (move the cursor and examine the points in scatterplot). The spreadsheet added up all the data points for us and we need to take that point out. Upon closer examination, I found one more entry which is not the name of a real person "THE TRAVEL AGENCY IN THE PARK". The entry is dropped from the dataset. The entries which have all the features as 'NaN' are also dropped from the dataset.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [8]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># Import plotly and and set your credentials</span>
<span class="kn">from</span> <span class="nn">plotly</span> <span class="kn">import</span> <span class="n">tools</span>
<span class="c1">#tools.set_credentials_file(username='*******', api_key='*********')</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [9]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">plotly.plotly</span> <span class="kn">as</span> <span class="nn">py</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="kn">as</span> <span class="nn">go</span>

<span class="c1"># Make scatterplot before outlier removal</span>
<span class="n">trace0</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">enron_data</span><span class="o">.</span><span class="n">salary</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="n">enron_data</span><span class="o">.</span><span class="n">bonus</span><span class="p">,</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">enron_data</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
    <span class="n">mode</span> <span class="o">=</span> <span class="s1">'markers'</span>
<span class="p">)</span>

<span class="c1"># Remove Outlier</span>
<span class="n">enron_data</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">'TOTAL'</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span> <span class="bp">True</span><span class="p">)</span>

<span class="c1"># Make scatterplot after outlier removal</span>
<span class="n">trace1</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">enron_data</span><span class="o">.</span><span class="n">salary</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="n">enron_data</span><span class="o">.</span><span class="n">bonus</span><span class="p">,</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">enron_data</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
    <span class="n">mode</span> <span class="o">=</span> <span class="s1">'markers'</span>
<span class="p">)</span>

<span class="c1"># Layout the plots together side by side</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">make_subplots</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">subplot_titles</span><span class="o">=</span><span class="p">(</span><span class="s1">'Before outlier removal'</span><span class="p">,</span> <span class="s1">'After outlier removal'</span><span class="p">))</span>

<span class="n">fig</span><span class="o">.</span><span class="n">append_trace</span><span class="p">(</span><span class="n">trace0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">append_trace</span><span class="p">(</span><span class="n">trace1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">fig</span><span class="p">[</span><span class="s1">'layout'</span><span class="p">][</span><span class="s1">'xaxis1'</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'salary'</span><span class="p">)</span>
<span class="n">fig</span><span class="p">[</span><span class="s1">'layout'</span><span class="p">][</span><span class="s1">'xaxis2'</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'salary'</span><span class="p">)</span>

<span class="n">fig</span><span class="p">[</span><span class="s1">'layout'</span><span class="p">][</span><span class="s1">'yaxis1'</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'bonus'</span><span class="p">)</span>
<span class="n">fig</span><span class="p">[</span><span class="s1">'layout'</span><span class="p">][</span><span class="s1">'yaxis2'</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">'bonus'</span><span class="p">)</span>

<span class="n">py</span><span class="o">.</span><span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>This is the format of your plot grid:
[ (1,1) x1,y1 ]  [ (1,2) x2,y2 ]

</pre>
</div>
</div>
<div class="output_area">
<div class="prompt output_prompt">Out[9]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<iframe height="525px" id="igraph" scrolling="no" seamless="seamless" src="https://plot.ly/~hadaarjan/399.embed" style="border:none;" width="100%"></iframe>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [10]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">enron_data</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">'THE TRAVEL AGENCY IN THE PARK'</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Optimize-Feature-Selection/Engineering">Optimize Feature Selection/Engineering<a class="anchor-link" href="#Optimize-Feature-Selection/Engineering">¶</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p>What features did you end up using in your POI identifier, and what selection process did you use to pick them? Did you have to do any scaling? Why or why not? As part of the assignment, you should attempt to engineer your own feature that does not come ready-made in the dataset -- explain what feature you tried to make, and the rationale behind it. In your feature selection step, if you used an algorithm like a decision tree, please also give the feature importances of the features that you use, and if you used an automated feature selection function like SelectKBest, please report the feature scores and reasons for your choice of parameter values.</p>
</blockquote>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Feature-engineering">Feature engineering<a class="anchor-link" href="#Feature-engineering">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Feature engineering involves using human intuition to hypothesize what feature might contain pattern that can be exploited using machine learning, coding up the new feature, visualizing and repeating the same process again. Our hypothesis here - "POI's sent email to each other at a rate higher than for Non-POI's." I coded up two new features fraction of emails this person gets from poi (fraction_from_poi) and fraction of emails this person send to poi (fraction_to_poi).
number of emails from this person to POI/total number of message from this person</p>
$$fraction\_from\_poi =\frac{number\ of\ emails\ from\ POI\ to\ this\ person}{total\ number\ of\ message\ to\ this\ person} = \frac{from\_poi\_to\_this\_person}{to\_messages}$$$$fraction\_to\_poi = \frac{number\ of\ emails\ from\ this\ person\ to\ POI}{total\ number\ of\ message\ from\ this\ person} = \frac{from\_this\_person\_to\_poi}{from\_messages}$$<p>When I visualize these new features, we can see that these new features provide discriminating power between POI and Non-POI. There is a good amount of feature space in the lower part of plot (on right) below 0.2 where there are no POIs.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [11]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1">#Create new feature(s)</span>
<span class="n">enron_data</span><span class="p">[</span><span class="s2">"fraction_from_poi"</span><span class="p">]</span> <span class="o">=</span> <span class="n">enron_data</span><span class="p">[</span><span class="s2">"from_poi_to_this_person"</span><span class="p">]</span><span class="o">.</span>\
<span class="n">divide</span><span class="p">(</span><span class="n">enron_data</span><span class="p">[</span><span class="s2">"to_messages"</span><span class="p">],</span> <span class="n">fill_value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">enron_data</span><span class="p">[</span><span class="s2">"fraction_to_poi"</span><span class="p">]</span> <span class="o">=</span> <span class="n">enron_data</span><span class="p">[</span><span class="s2">"from_this_person_to_poi"</span><span class="p">]</span><span class="o">.</span>\
<span class="n">divide</span><span class="p">(</span><span class="n">enron_data</span><span class="p">[</span><span class="s2">"from_messages"</span><span class="p">],</span> <span class="n">fill_value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [12]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">enron_data</span><span class="p">[</span><span class="s2">"fraction_from_poi"</span><span class="p">]</span> <span class="o">=</span> <span class="n">enron_data</span><span class="p">[</span><span class="s2">"fraction_from_poi"</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">enron_data</span><span class="p">[</span><span class="s2">"fraction_to_poi"</span><span class="p">]</span> <span class="o">=</span> <span class="n">enron_data</span><span class="p">[</span><span class="s2">"fraction_to_poi"</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [13]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_notebook</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>

<span class="n">output_notebook</span><span class="p">()</span>

<span class="n">colormap</span> <span class="o">=</span> <span class="p">{</span><span class="bp">False</span><span class="p">:</span> <span class="s1">'blue'</span><span class="p">,</span> <span class="bp">True</span><span class="p">:</span> <span class="s1">'red'</span><span class="p">}</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">colormap</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">enron_data</span><span class="p">[</span><span class="s1">'poi'</span><span class="p">]]</span>

<span class="n">labelmap</span> <span class="o">=</span> <span class="p">{</span><span class="bp">False</span><span class="p">:</span> <span class="s1">'Non-POI'</span><span class="p">,</span> <span class="bp">True</span><span class="p">:</span> <span class="s1">'POI'</span><span class="p">}</span>
<span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">labelmap</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">enron_data</span><span class="p">[</span><span class="s1">'poi'</span><span class="p">]]</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span>
    <span class="n">x1</span><span class="o">=</span><span class="n">enron_data</span><span class="p">[</span><span class="s2">"from_poi_to_this_person"</span><span class="p">],</span>
    <span class="n">y1</span><span class="o">=</span><span class="n">enron_data</span><span class="p">[</span><span class="s2">"from_this_person_to_poi"</span><span class="p">],</span>
    <span class="n">x2</span><span class="o">=</span><span class="n">enron_data</span><span class="p">[</span><span class="s2">"fraction_from_poi"</span><span class="p">],</span>
    <span class="n">y2</span><span class="o">=</span><span class="n">enron_data</span><span class="p">[</span><span class="s2">"fraction_to_poi"</span><span class="p">],</span>
    <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="n">labels</span>
<span class="p">))</span>

<span class="c1"># Before feature engineering</span>
<span class="n">s1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">plot_width</span><span class="o">=</span><span class="mi">450</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<span class="n">s1</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">'no. of emails from POI to this person'</span>
<span class="n">s1</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">'no. of emails from this person to POI'</span>

<span class="n">s1</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">'x1'</span><span class="p">,</span> <span class="s1">'y1'</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> 
          <span class="n">color</span><span class="o">=</span><span class="s1">'color'</span><span class="p">,</span> <span class="n">legend</span> <span class="o">=</span> <span class="s1">'label'</span><span class="p">,</span> <span class="n">source</span> <span class="o">=</span> <span class="n">source</span><span class="p">)</span>

<span class="c1"># After feature engineering</span>
<span class="n">s2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">plot_width</span><span class="o">=</span><span class="mi">450</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<span class="n">s2</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">'fraction of emails this person gets from POI'</span>
<span class="n">s2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">'fraction of emails this person sends to POI'</span>

<span class="n">s2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">'x2'</span><span class="p">,</span> <span class="s1">'y2'</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> 
          <span class="n">color</span><span class="o">=</span><span class="s1">'color'</span><span class="p">,</span> <span class="n">legend</span> <span class="o">=</span> <span class="s1">'label'</span><span class="p">,</span> <span class="n">source</span> <span class="o">=</span> <span class="n">source</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">row</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea ">
<div class="bk-root">
<a class="bk-logo bk-logo-small bk-logo-notebook" href="http://bokeh.pydata.org" target="_blank"></a>
<span id="c62d888c-75b4-4792-aa2b-88df37dbd870">Loading BokehJS ...</span>
</div>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div id="8f4c8cfc-6cb4-46f1-b5c8-25d3122774f9"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#8f4c8cfc-6cb4-46f1-b5c8-25d3122774f9');

(function(global) {
  function now() {
    return new Date();
  }

  var force = true;

  if (typeof (window._bokeh_onload_callbacks) === "undefined" || force === true) {
    window._bokeh_onload_callbacks = [];
    window._bokeh_is_loading = undefined;
  }


  
  if (typeof (window._bokeh_timeout) === "undefined" || force === true) {
    window._bokeh_timeout = Date.now() + 5000;
    window._bokeh_failed_load = false;
  }

  var NB_LOAD_WARNING = {'data': {'text/html':
     "<div style='background-color: #fdd'>\n"+
     "<p>\n"+
     "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
     "may be due to a slow or bad network connection. Possible fixes:\n"+
     "</p>\n"+
     "<ul>\n"+
     "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
     "<li>use INLINE resources instead, as so:</li>\n"+
     "</ul>\n"+
     "<code>\n"+
     "from bokeh.resources import INLINE\n"+
     "output_notebook(resources=INLINE)\n"+
     "</code>\n"+
     "</div>"}};

  function display_loaded() {
    if (window.Bokeh !== undefined) {
      var el = document.getElementById("c62d888c-75b4-4792-aa2b-88df37dbd870");
      el.textContent = "BokehJS " + Bokeh.version + " successfully loaded.";
    } else if (Date.now() < window._bokeh_timeout) {
      setTimeout(display_loaded, 100)
    }
  }

  function run_callbacks() {
    try {
      window._bokeh_onload_callbacks.forEach(function(callback) { callback() });
    }
    finally {
      delete window._bokeh_onload_callbacks
    }
    console.info("Bokeh: all callbacks have finished");
  }

  function load_libs(js_urls, callback) {
    window._bokeh_onload_callbacks.push(callback);
    if (window._bokeh_is_loading > 0) {
      console.log("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.log("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    window._bokeh_is_loading = js_urls.length;
    for (var i = 0; i < js_urls.length; i++) {
      var url = js_urls[i];
      var s = document.createElement('script');
      s.src = url;
      s.async = false;
      s.onreadystatechange = s.onload = function() {
        window._bokeh_is_loading--;
        if (window._bokeh_is_loading === 0) {
          console.log("Bokeh: all BokehJS libraries loaded");
          run_callbacks()
        }
      };
      s.onerror = function() {
        console.warn("failed to load library " + url);
      };
      console.log("Bokeh: injecting script tag for BokehJS library: ", url);
      document.getElementsByTagName("head")[0].appendChild(s);
    }
  };var element = document.getElementById("c62d888c-75b4-4792-aa2b-88df37dbd870");
  if (element == null) {
    console.log("Bokeh: ERROR: autoload.js configured with elementid 'c62d888c-75b4-4792-aa2b-88df37dbd870' but no matching script tag was found. ")
    return false;
  }

  var js_urls = ["https://cdn.pydata.org/bokeh/release/bokeh-0.12.6.min.js", "https://cdn.pydata.org/bokeh/release/bokeh-widgets-0.12.6.min.js"];

  var inline_js = [
    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
    
    function(Bokeh) {
      
    },
    
    function(Bokeh) {
      
      document.getElementById("c62d888c-75b4-4792-aa2b-88df37dbd870").textContent = "BokehJS is loading...";
    },
    function(Bokeh) {
      console.log("Bokeh: injecting CSS: https://cdn.pydata.org/bokeh/release/bokeh-0.12.6.min.css");
      Bokeh.embed.inject_css("https://cdn.pydata.org/bokeh/release/bokeh-0.12.6.min.css");
      console.log("Bokeh: injecting CSS: https://cdn.pydata.org/bokeh/release/bokeh-widgets-0.12.6.min.css");
      Bokeh.embed.inject_css("https://cdn.pydata.org/bokeh/release/bokeh-widgets-0.12.6.min.css");
    }
  ];

  function run_inline_js() {
    
    if ((window.Bokeh !== undefined) || (force === true)) {
      for (var i = 0; i < inline_js.length; i++) {
        inline_js[i](window.Bokeh);
      }if (force === true) {
        display_loaded();
      }} else if (Date.now() < window._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!window._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      window._bokeh_failed_load = true;
    } else if (force !== true) {
      var cell = $(document.getElementById("c62d888c-75b4-4792-aa2b-88df37dbd870")).parents('.cell').data().cell;
      cell.output_area.append_execute_result(NB_LOAD_WARNING)
    }

  }

  if (window._bokeh_is_loading === 0) {
    console.log("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(js_urls, function() {
      console.log("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(this));
</script>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea ">
<div class="bk-root">
<div class="bk-plotdiv" id="c52c0df8-e360-41aa-b8bf-060e3473d2db"></div>
</div>
<script type="text/javascript">
  
  (function(global) {
    function now() {
      return new Date();
    }
  
    var force = false;
  
    if (typeof (window._bokeh_onload_callbacks) === "undefined" || force === true) {
      window._bokeh_onload_callbacks = [];
      window._bokeh_is_loading = undefined;
    }
  
  
    
    if (typeof (window._bokeh_timeout) === "undefined" || force === true) {
      window._bokeh_timeout = Date.now() + 0;
      window._bokeh_failed_load = false;
    }
  
    var NB_LOAD_WARNING = {'data': {'text/html':
       "<div style='background-color: #fdd'>\n"+
       "<p>\n"+
       "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
       "may be due to a slow or bad network connection. Possible fixes:\n"+
       "</p>\n"+
       "<ul>\n"+
       "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
       "<li>use INLINE resources instead, as so:</li>\n"+
       "</ul>\n"+
       "<code>\n"+
       "from bokeh.resources import INLINE\n"+
       "output_notebook(resources=INLINE)\n"+
       "</code>\n"+
       "</div>"}};
  
    function display_loaded() {
      if (window.Bokeh !== undefined) {
        var el = document.getElementById("c52c0df8-e360-41aa-b8bf-060e3473d2db");
        el.textContent = "BokehJS " + Bokeh.version + " successfully loaded.";
      } else if (Date.now() < window._bokeh_timeout) {
        setTimeout(display_loaded, 100)
      }
    }
  
    function run_callbacks() {
      try {
        window._bokeh_onload_callbacks.forEach(function(callback) { callback() });
      }
      finally {
        delete window._bokeh_onload_callbacks
      }
      console.info("Bokeh: all callbacks have finished");
    }
  
    function load_libs(js_urls, callback) {
      window._bokeh_onload_callbacks.push(callback);
      if (window._bokeh_is_loading > 0) {
        console.log("Bokeh: BokehJS is being loaded, scheduling callback at", now());
        return null;
      }
      if (js_urls == null || js_urls.length === 0) {
        run_callbacks();
        return null;
      }
      console.log("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
      window._bokeh_is_loading = js_urls.length;
      for (var i = 0; i < js_urls.length; i++) {
        var url = js_urls[i];
        var s = document.createElement('script');
        s.src = url;
        s.async = false;
        s.onreadystatechange = s.onload = function() {
          window._bokeh_is_loading--;
          if (window._bokeh_is_loading === 0) {
            console.log("Bokeh: all BokehJS libraries loaded");
            run_callbacks()
          }
        };
        s.onerror = function() {
          console.warn("failed to load library " + url);
        };
        console.log("Bokeh: injecting script tag for BokehJS library: ", url);
        document.getElementsByTagName("head")[0].appendChild(s);
      }
    };var element = document.getElementById("c52c0df8-e360-41aa-b8bf-060e3473d2db");
    if (element == null) {
      console.log("Bokeh: ERROR: autoload.js configured with elementid 'c52c0df8-e360-41aa-b8bf-060e3473d2db' but no matching script tag was found. ")
      return false;
    }
  
    var js_urls = [];
  
    var inline_js = [
      function(Bokeh) {
        (function() {
          var fn = function() {
            var docs_json = {"127802df-8918-4e52-84f6-ff9b9c2049a9":{"roots":{"references":[{"attributes":{"data_source":{"id":"24830875-f8af-4e67-9dc4-9fe6663bb2eb","type":"ColumnDataSource"},"glyph":{"id":"79ddcb69-3df8-40e7-b851-8370719ac4d7","type":"Circle"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"a21ed8ca-a363-4ab9-a79b-ef71b378b5e7","type":"Circle"},"selection_glyph":null},"id":"ed3d6590-b5d2-4be6-8016-6508cc0de71c","type":"GlyphRenderer"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_scroll":"auto","active_tap":"auto","tools":[{"id":"bd8a61f5-033e-42fa-b68c-7d0e8eceac60","type":"PanTool"},{"id":"16e04f8d-a286-4a57-8f78-aa388ca8d7e8","type":"WheelZoomTool"},{"id":"1f8cdd2e-0fda-420a-b0cf-f3d206a294b4","type":"BoxZoomTool"},{"id":"afade5df-a542-4001-9407-e5ddfcac12b3","type":"SaveTool"},{"id":"8b2d22d9-755e-4dfa-9d44-a737a5d758a1","type":"ResetTool"},{"id":"1ed9abd2-207c-41c9-a2eb-c94248b736ad","type":"HelpTool"}]},"id":"8d39f375-d034-442c-8938-33c25af08a4e","type":"Toolbar"},{"attributes":{"dimension":1,"plot":{"id":"3a6c2e92-493e-48b2-9b37-8ae01ac8c3ee","subtype":"Figure","type":"Plot"},"ticker":{"id":"39c22b92-f2c0-4e3d-a5ba-07742f3458cc","type":"BasicTicker"}},"id":"4f93427c-671c-4483-a36d-689bc95bf816","type":"Grid"},{"attributes":{},"id":"39c22b92-f2c0-4e3d-a5ba-07742f3458cc","type":"BasicTicker"},{"attributes":{"axis_label":"fraction of emails this person sends to POI","formatter":{"id":"2848e762-14db-4632-ab34-689e233b683b","type":"BasicTickFormatter"},"plot":{"id":"3a6c2e92-493e-48b2-9b37-8ae01ac8c3ee","subtype":"Figure","type":"Plot"},"ticker":{"id":"39c22b92-f2c0-4e3d-a5ba-07742f3458cc","type":"BasicTicker"}},"id":"0114f13f-d13c-49d1-9a30-b0723a2e72ee","type":"LinearAxis"},{"attributes":{"plot":null,"text":""},"id":"7448328a-9f22-4a93-a57f-92239ade82ec","type":"Title"},{"attributes":{},"id":"fcf544ab-5dfa-4771-9199-b18c261c6da1","type":"BasicTicker"},{"attributes":{"callback":null,"column_names":["x2","y1","x1","color","y2","label"],"data":{"color":["blue","blue","blue","blue","blue","blue","blue","red","blue","blue","blue","blue","blue","blue","blue","red","blue","blue","blue","blue","red","blue","red","blue","blue","blue","red","blue","blue","blue","blue","red","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","red","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","red","blue","blue","blue","blue","red","blue","blue","blue","blue","blue","red","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","red","red","blue","red","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","red","red","blue","blue","blue","blue","blue","red","blue","blue","red","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","red","blue"],"label":["Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","POI","Non-POI","Non-POI","Non-POI","Non-POI","POI","Non-POI","POI","Non-POI","Non-POI","Non-POI","POI","Non-POI","Non-POI","Non-POI","Non-POI","POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","POI","Non-POI","Non-POI","Non-POI","Non-POI","POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","POI","POI","Non-POI","POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","POI","POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","POI","Non-POI","Non-POI","POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","Non-POI","POI","Non-POI"],"x1":{"__ndarray__":"AAAAAACAR0AAAAAAAAAAAAAAAAAAgENAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYkAAAAAAAIBsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQQAAAAAAAAAAAAAAAAAAAN0AAAAAAAAA5QAAAAAAAAAAAAAAAAACAYUAAAAAAAAAqQAAAAAAAAAAAAAAAAAAAAAAAAAAAAIBjQAAAAAAA4GhAAAAAAAAAPUAAAAAAAABNQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG5AAAAAAAAAJEAAAAAAAAAAAAAAAAAAAAAAAAAAAADAXEAAAAAAAIBQQAAAAAAAAFBAAAAAAAAAAAAAAAAAABBzQAAAAAAAAAAAAAAAAAAAJEAAAAAAAIBnQAAAAAAAAAAAAAAAAACAWkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARUAAAAAAAAAAAAAAAAAAAPA/AAAAAAAAAAAAAAAAAAAAAAAAAAAAQG5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAACRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIBmQAAAAAAAAEBAAAAAAAAAEEAAAAAAAAAwQAAAAAAAgEFAAAAAAAAAAAAAAAAAAABEQAAAAAAAAAAAAAAAAAAARkAAAAAAAIBBQAAAAAAAACRAAAAAAAAAPEAAAAAAAAA5QAAAAAAAAAAAAAAAAACAREAAAAAAAIBhQAAAAAAAAAAAAAAAAABgb0AAAAAAAIBKQAAAAAAAAAAAAAAAAACAgEAAAAAAAMBeQAAAAAAAwFBAAAAAAAAAAAAAAAAAAAAkQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACBAAAAAAAAAOUAAAAAAAABKQAAAAAAAAFdAAAAAAAAAS0AAAAAAAABNQAAAAAAAAAAAAAAAAAAAQ0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAChAAAAAAAAAJkAAAAAAAAAAAAAAAAAAADRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHEAAAAAAAIBOQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgGlAAAAAAAAAAAAAAAAAAABFQAAAAAAAgEFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgFdAAAAAAACAUkAAAAAAAAA4QAAAAAAAACpAAAAAAACAQ0AAAAAAAAA8QAAAAAAAAFZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgEJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACRAAAAAAAAAKEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMUAAAAAAAAAAAAAAAAAAADZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQGdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA","dtype":"float64","shape":[144]},"x2":{"__ndarray__":"H/an2JyVkD8AAAAAAAAAAN3kOUC7o7E/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQSukv3QolD/fTq65hDedPwAAAAAAAAAAAAAAAAAAAADiUny6l2OFPwAAAAAAAAAAxkVmks9PjT9bv1Kg1q+EPwAAAAAAAAAAQnFFhCBKsz9LE/hQo+qBPwAAAAAAAAAAAAAAAAAAAADWE2Ub7aumP5cbPNXim7M/uHzLt3zLtz98Ezx5IGSfPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHcYFHVyecE/CIZki2jOij8AAAAAAAAAAAAAAAAAAAAAVcKdVMKdxD9d7+TqwtmVP00W2iZxDJ4/AAAAAAAAAADoPnYdklu+PwAAAAAAAAAAF1100UUXrT/Mr27K1NHLPwAAAAAAAAAAf0jg7YcEvj8AAAAAAAAAAAAAAAAAAAAAGYiBGIiBmD8AAAAAAAAAABIYgREYgVE/AAAAAAAAAAAAAAAAAAAAAI/3w/+o6rI/AAAAAAAAAAAAAAAAAAAAADyfHjdjf6g/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHthHU0R/rj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABcj0Ou//ymP5+YjUZgW58/TeQV++aXfD8QBEEQBEGgP+OYIiosD4s/AAAAAAAAAAAIH3zwwQefPwAAAAAAAAAAnxjJYzoskz8NNaXQauyoPwAAAAAAALQ/55xzzjnnrD805ow5Y864PwAAAAAAAAAAiaa1xeY5gj8uwmMTFXuGPwAAAAAAAAAAdWQV6rbynj9OfQkcatyWPwAAAAAAAAAA3ODIQOmesj/0LVFF63mdP2+K13TUT5g/AAAAAAAAAAAWOoMVOoOFPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM58NamRh3U/FcMct1fdkT+E6PFdOIieP3rNkKWXTJw//XmVxRntrj+CSAdPMziZPwAAAAAAAAAAX3XCbeobqD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJeWlpaWlrY/f9y6vAOOdD8AAAAAAAAAAMIU+awbTJE/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoOhoSMHtfz/H2o07UDqpPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIxrLufNQL8/AAAAAAAAAABLODFC5sKnP4IS3mjq/Jo/AAAAAAAAAAAAAAAAAAAAAGZb+mpG4p0/pTiIbxgCdD/Wh8b60Fh/P+py+4MMla0/+IN0NYBJsD+cbiWaO/6BP750njFD2Jg/AAAAAAAAAAAAAAAAAAAAAI9TYESLoIw/AAAAAAAAAAAAAAAAAAAAAGQhC1nIQpY/0LrBFPmsuz8AAAAAAAAAAAAAAAAAAAAALPSAkoDxmT8AAAAAAAAAAClcj8L1KKw/AAAAAAAAAAAAAAAAAAAAAGRE6LnPpJ8/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA","dtype":"float64","shape":[144]},"y1":{"__ndarray__":"AAAAAABAUEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgeEAAAAAAAABbQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPA/AAAAAAAAIEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAALkAAAAAAAADwPwAAAAAAAAAAAAAAAAAAAAAAAAAAAMBRQAAAAAAAADlAAAAAAAAAHEAAAAAAAAAoQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZAAAAAAAAAAAAAAAAAAAAQQAAAAAAAAAAAAAAAAAAAEEAAAAAAAAiDQAAAAAAAADRAAAAAAAAAAAAAAAAAAAAsQAAAAAAAAAAAAAAAAAAACEAAAAAAAAAmQAAAAAAAAAAAAAAAAAAACEAAAAAAAAAAAAAAAAAAAAAAAAAAAACAQkAAAAAAAAAAAAAAAAAAACBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABhAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADtAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIBOQAAAAAAAADVAAAAAAAAAHEAAAAAAAAAAAAAAAAAAAENAAAAAAAAAAAAAAAAAAADwPwAAAAAAAAAAAAAAAAAALkAAAAAAAAAUQAAAAAAAADFAAAAAAAAAFEAAAAAAAAAzQAAAAAAAAAAAAAAAAABgZUAAAAAAADB4QAAAAAAAAAAAAAAAAABAaEAAAAAAAAAuQAAAAAAAAAAAAAAAAACweUAAAAAAAAAwQAAAAAAAACxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAQGhAAAAAAAAA8D8AAAAAAAA6QAAAAAAAAAAAAAAAAAAA8D8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAC5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIQAAAAAAAAPA/AAAAAAAAAAAAAAAAAAAAAAAAAAAAgEhAAAAAAAAAAAAAAAAAAAAQQAAAAAAAAEhAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwFRAAAAAAABAUEAAAAAAAAAYQAAAAAAAACxAAAAAAAAAMkAAAAAAAAA3QAAAAAAAAD5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAACpAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADhAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA","dtype":"float64","shape":[144]},"y2":{"__ndarray__":"qRnMbs5Snj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXZLbZcDAtj8zKBUm3o/MPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJZ7GmG5p6E/mpmZmZmZyT+SJEmSJEnCPwAAAAAAAAAAchzHcRzH4T/6GJyPwfmYPwAAAAAAAAAAAAAAAAAAAACDaSZK20KxP47jOI7jOMY/3t3d3d3d3T/Wh8b60FjPPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJqZmZmZmdE/AAAAAAAAAAAIH3zwwQe/PwAAAAAAAAAA0LrBFPmsqz9mmWWWWWbJP4lHiqm+h5Y/AAAAAAAAAAAcx3Ecx3HMPwAAAAAAAAAA27Zt27Ztyz8AAAAAAADgPwAAAAAAAAAAAAAAAAAA0D8AAAAAAAAAAAAAAAAAAAAAk18s+cWS3z8AAAAAAAAAAAAAAAAAAOA/AAAAAAAAAAAAAAAAAAAAAJIkSZIkSdI/AAAAAAAAAAAAAAAAAAAAAKOLLrroouM/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA2D8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwVIx4NhegPwAAAAAAAOU/Q3kN5TWU1z8AAAAAAAAAAMcoy/5gVqI/AAAAAAAAAABoL6G9hPaiPwAAAAAAAAAAWyJwSkihjD/T0tLS0tLCPwAAAAAAAPA/eQ3lNZTX0D9u27Zt27bVPwAAAAAAAAAAujrZQ8lfiD/EQN7MyVCtPwAAAAAAAAAA2ktoL6G9vD8uGYJ1tHnPPwAAAAAAAAAAX8XP/utZxD8cx3Ecx3HcPxzHcRzHccw/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkNEwARkNgz8AAAAAAAAAADhidnLBHLI/FDuxEzuxsz9VVVVVVVXhPwAAAAAAAAAAlnsaYbmnoT8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAF2zBFmzBpj8AAAAAAAAAAGIndmIndtI/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQusEU+azLPwAAAAAAALA/AAAAAAAAAAAAAAAAAAAAAJxNYZxNYcw/AAAAAAAAAAAcx3Ecx3HMP7sStStRu+I/AAAAAAAAAAAAAAAAAAAAALOx00+cs58/s9LoERVkqz+XlpaWlpamP5dv+ZZv+dY/CtejcD0K5z8AAAAAAADQP3Icx3Ecx9E/AAAAAAAAAAAAAAAAAAAAAFFeQ3kN5dU/AAAAAAAAAAAAAAAAAAAAAGwor6G8huI/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAN7d3d3d3c0/AAAAAAAAAAAAAAAAAAAAACchir/IGaY/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA","dtype":"float64","shape":[144]}}},"id":"24830875-f8af-4e67-9dc4-9fe6663bb2eb","type":"ColumnDataSource"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"plot":null,"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"c8238680-b992-41a4-95a0-6b7ba36bfa69","type":"BoxAnnotation"},{"attributes":{},"id":"fb0ed18c-02a3-4e3a-a5e1-17a1c04ded1b","type":"BasicTickFormatter"},{"attributes":{"axis_label":"fraction of emails this person gets from POI","formatter":{"id":"fb0ed18c-02a3-4e3a-a5e1-17a1c04ded1b","type":"BasicTickFormatter"},"plot":{"id":"3a6c2e92-493e-48b2-9b37-8ae01ac8c3ee","subtype":"Figure","type":"Plot"},"ticker":{"id":"da025c33-af8a-45fb-807d-7f8736f81d09","type":"BasicTicker"}},"id":"6bc85a24-3377-42cd-91af-74ca0ce6eb98","type":"LinearAxis"},{"attributes":{"plot":{"id":"3a6c2e92-493e-48b2-9b37-8ae01ac8c3ee","subtype":"Figure","type":"Plot"}},"id":"fcaccdbd-cb71-4c9e-94ff-3faf32b53b6d","type":"PanTool"},{"attributes":{"overlay":{"id":"c8238680-b992-41a4-95a0-6b7ba36bfa69","type":"BoxAnnotation"},"plot":{"id":"3a6c2e92-493e-48b2-9b37-8ae01ac8c3ee","subtype":"Figure","type":"Plot"}},"id":"99fde8f9-2b1f-4024-a193-d5b4e8b65c7c","type":"BoxZoomTool"},{"attributes":{"plot":{"id":"52a25e03-5cb0-4ad1-8b82-995a1fe56eef","subtype":"Figure","type":"Plot"}},"id":"8b2d22d9-755e-4dfa-9d44-a737a5d758a1","type":"ResetTool"},{"attributes":{"items":[{"id":"de465836-31e1-477a-95e6-c94ecec375dd","type":"LegendItem"}],"plot":{"id":"52a25e03-5cb0-4ad1-8b82-995a1fe56eef","subtype":"Figure","type":"Plot"}},"id":"685278d6-1e81-42b1-8b6f-121680c7f21a","type":"Legend"},{"attributes":{"fill_alpha":{"value":0.5},"fill_color":{"field":"color"},"line_alpha":{"value":0.5},"line_color":{"field":"color"},"size":{"units":"screen","value":10},"x":{"field":"x2"},"y":{"field":"y2"}},"id":"79ddcb69-3df8-40e7-b851-8370719ac4d7","type":"Circle"},{"attributes":{},"id":"afccf3d5-41d3-486c-bc8d-1d3542464698","type":"ToolEvents"},{"attributes":{},"id":"f51b2d46-b314-4253-876f-46bbbfd371c0","type":"BasicTickFormatter"},{"attributes":{"fill_alpha":{"value":0.5},"fill_color":{"field":"color"},"line_alpha":{"value":0.5},"line_color":{"field":"color"},"size":{"units":"screen","value":10},"x":{"field":"x1"},"y":{"field":"y1"}},"id":"c17b756a-2fe8-4bac-905c-4b7b27f6492a","type":"Circle"},{"attributes":{"plot":{"id":"3a6c2e92-493e-48b2-9b37-8ae01ac8c3ee","subtype":"Figure","type":"Plot"}},"id":"9e192d53-b1f2-43b7-a22d-00bfa97e77cc","type":"HelpTool"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_scroll":"auto","active_tap":"auto","tools":[{"id":"fcaccdbd-cb71-4c9e-94ff-3faf32b53b6d","type":"PanTool"},{"id":"4294ab5f-a002-455a-8a4c-fd51daf3c98c","type":"WheelZoomTool"},{"id":"99fde8f9-2b1f-4024-a193-d5b4e8b65c7c","type":"BoxZoomTool"},{"id":"222a420b-56f4-4893-86b7-53d0ced2a013","type":"SaveTool"},{"id":"dc88120f-5a90-4d7a-80d9-8c5c32191339","type":"ResetTool"},{"id":"9e192d53-b1f2-43b7-a22d-00bfa97e77cc","type":"HelpTool"}]},"id":"64297413-f737-4d1b-9d68-3cf0ab631488","type":"Toolbar"},{"attributes":{"plot":null,"text":""},"id":"ffb282a1-c100-4e61-a89f-10316dad2df9","type":"Title"},{"attributes":{"plot":{"id":"3a6c2e92-493e-48b2-9b37-8ae01ac8c3ee","subtype":"Figure","type":"Plot"}},"id":"4294ab5f-a002-455a-8a4c-fd51daf3c98c","type":"WheelZoomTool"},{"attributes":{},"id":"1a18b73f-b69b-4d7f-a55c-4a94f55d20b2","type":"ToolEvents"},{"attributes":{"axis_label":"no. of emails from this person to POI","formatter":{"id":"f51b2d46-b314-4253-876f-46bbbfd371c0","type":"BasicTickFormatter"},"plot":{"id":"52a25e03-5cb0-4ad1-8b82-995a1fe56eef","subtype":"Figure","type":"Plot"},"ticker":{"id":"fcf544ab-5dfa-4771-9199-b18c261c6da1","type":"BasicTicker"}},"id":"da3e075d-dbbf-42f8-a42d-d2cebe4b2df3","type":"LinearAxis"},{"attributes":{"below":[{"id":"090b2a98-4a7d-4ecb-93eb-a029b48e0fa0","type":"LinearAxis"}],"left":[{"id":"da3e075d-dbbf-42f8-a42d-d2cebe4b2df3","type":"LinearAxis"}],"plot_height":400,"plot_width":450,"renderers":[{"id":"090b2a98-4a7d-4ecb-93eb-a029b48e0fa0","type":"LinearAxis"},{"id":"5d05cf41-04d9-49c4-9aa3-dfaeebbbfc1f","type":"Grid"},{"id":"da3e075d-dbbf-42f8-a42d-d2cebe4b2df3","type":"LinearAxis"},{"id":"9f94c0f2-979e-4839-98e1-f08eabdfe21a","type":"Grid"},{"id":"a34c2a91-da92-46f5-94a9-15c3adc9183e","type":"BoxAnnotation"},{"id":"685278d6-1e81-42b1-8b6f-121680c7f21a","type":"Legend"},{"id":"9007bd36-6b69-4e4b-9b1f-0171a5667203","type":"GlyphRenderer"}],"title":{"id":"7448328a-9f22-4a93-a57f-92239ade82ec","type":"Title"},"tool_events":{"id":"1a18b73f-b69b-4d7f-a55c-4a94f55d20b2","type":"ToolEvents"},"toolbar":{"id":"8d39f375-d034-442c-8938-33c25af08a4e","type":"Toolbar"},"x_range":{"id":"d271de14-9bd9-4082-867e-69368ee266e2","type":"DataRange1d"},"x_scale":{"id":"20475263-fda5-4792-aaef-8f59700eed3c","type":"LinearScale"},"y_range":{"id":"aa380f2e-a3fb-46b3-81d9-cfd273f0d406","type":"DataRange1d"},"y_scale":{"id":"22fd3b73-f038-4c9e-b18b-39e3a6014fab","type":"LinearScale"}},"id":"52a25e03-5cb0-4ad1-8b82-995a1fe56eef","subtype":"Figure","type":"Plot"},{"attributes":{"plot":{"id":"52a25e03-5cb0-4ad1-8b82-995a1fe56eef","subtype":"Figure","type":"Plot"}},"id":"1ed9abd2-207c-41c9-a2eb-c94248b736ad","type":"HelpTool"},{"attributes":{},"id":"20475263-fda5-4792-aaef-8f59700eed3c","type":"LinearScale"},{"attributes":{"children":[{"id":"52a25e03-5cb0-4ad1-8b82-995a1fe56eef","subtype":"Figure","type":"Plot"},{"id":"3a6c2e92-493e-48b2-9b37-8ae01ac8c3ee","subtype":"Figure","type":"Plot"}]},"id":"e2683ec1-cbf8-4675-8c31-51c595472fbf","type":"Row"},{"attributes":{"overlay":{"id":"a34c2a91-da92-46f5-94a9-15c3adc9183e","type":"BoxAnnotation"},"plot":{"id":"52a25e03-5cb0-4ad1-8b82-995a1fe56eef","subtype":"Figure","type":"Plot"}},"id":"1f8cdd2e-0fda-420a-b0cf-f3d206a294b4","type":"BoxZoomTool"},{"attributes":{"items":[{"id":"34203478-6789-4226-834d-a879ea79284c","type":"LegendItem"}],"plot":{"id":"3a6c2e92-493e-48b2-9b37-8ae01ac8c3ee","subtype":"Figure","type":"Plot"}},"id":"1f4abc2b-d47e-4096-9531-c737d00641cb","type":"Legend"},{"attributes":{"label":{"field":"label"},"renderers":[{"id":"9007bd36-6b69-4e4b-9b1f-0171a5667203","type":"GlyphRenderer"}]},"id":"de465836-31e1-477a-95e6-c94ecec375dd","type":"LegendItem"},{"attributes":{},"id":"4d57ce2a-a94f-4456-b3cd-f99e1f0cdb91","type":"LinearScale"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"size":{"units":"screen","value":10},"x":{"field":"x1"},"y":{"field":"y1"}},"id":"81fcc1fe-d137-4cd6-9187-437d989fc662","type":"Circle"},{"attributes":{"below":[{"id":"6bc85a24-3377-42cd-91af-74ca0ce6eb98","type":"LinearAxis"}],"left":[{"id":"0114f13f-d13c-49d1-9a30-b0723a2e72ee","type":"LinearAxis"}],"plot_height":400,"plot_width":450,"renderers":[{"id":"6bc85a24-3377-42cd-91af-74ca0ce6eb98","type":"LinearAxis"},{"id":"f45af758-45bc-4254-8ae7-66431a4f7d55","type":"Grid"},{"id":"0114f13f-d13c-49d1-9a30-b0723a2e72ee","type":"LinearAxis"},{"id":"4f93427c-671c-4483-a36d-689bc95bf816","type":"Grid"},{"id":"c8238680-b992-41a4-95a0-6b7ba36bfa69","type":"BoxAnnotation"},{"id":"1f4abc2b-d47e-4096-9531-c737d00641cb","type":"Legend"},{"id":"ed3d6590-b5d2-4be6-8016-6508cc0de71c","type":"GlyphRenderer"}],"title":{"id":"ffb282a1-c100-4e61-a89f-10316dad2df9","type":"Title"},"tool_events":{"id":"afccf3d5-41d3-486c-bc8d-1d3542464698","type":"ToolEvents"},"toolbar":{"id":"64297413-f737-4d1b-9d68-3cf0ab631488","type":"Toolbar"},"x_range":{"id":"4beb8765-750d-47e5-97ba-450f0e265a58","type":"DataRange1d"},"x_scale":{"id":"4d57ce2a-a94f-4456-b3cd-f99e1f0cdb91","type":"LinearScale"},"y_range":{"id":"cce62636-078a-4adc-825b-20a3278e1b25","type":"DataRange1d"},"y_scale":{"id":"a77817db-7848-4bb1-9e10-1c7f4521da41","type":"LinearScale"}},"id":"3a6c2e92-493e-48b2-9b37-8ae01ac8c3ee","subtype":"Figure","type":"Plot"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"plot":null,"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"a34c2a91-da92-46f5-94a9-15c3adc9183e","type":"BoxAnnotation"},{"attributes":{},"id":"2848e762-14db-4632-ab34-689e233b683b","type":"BasicTickFormatter"},{"attributes":{},"id":"1c906be0-ddc3-416c-a32b-58305d59fe36","type":"BasicTicker"},{"attributes":{"plot":{"id":"3a6c2e92-493e-48b2-9b37-8ae01ac8c3ee","subtype":"Figure","type":"Plot"}},"id":"dc88120f-5a90-4d7a-80d9-8c5c32191339","type":"ResetTool"},{"attributes":{"label":{"field":"label"},"renderers":[{"id":"ed3d6590-b5d2-4be6-8016-6508cc0de71c","type":"GlyphRenderer"}]},"id":"34203478-6789-4226-834d-a879ea79284c","type":"LegendItem"},{"attributes":{"dimension":1,"plot":{"id":"52a25e03-5cb0-4ad1-8b82-995a1fe56eef","subtype":"Figure","type":"Plot"},"ticker":{"id":"fcf544ab-5dfa-4771-9199-b18c261c6da1","type":"BasicTicker"}},"id":"9f94c0f2-979e-4839-98e1-f08eabdfe21a","type":"Grid"},{"attributes":{"plot":{"id":"52a25e03-5cb0-4ad1-8b82-995a1fe56eef","subtype":"Figure","type":"Plot"}},"id":"16e04f8d-a286-4a57-8f78-aa388ca8d7e8","type":"WheelZoomTool"},{"attributes":{},"id":"22fd3b73-f038-4c9e-b18b-39e3a6014fab","type":"LinearScale"},{"attributes":{},"id":"da025c33-af8a-45fb-807d-7f8736f81d09","type":"BasicTicker"},{"attributes":{},"id":"a77817db-7848-4bb1-9e10-1c7f4521da41","type":"LinearScale"},{"attributes":{"plot":{"id":"3a6c2e92-493e-48b2-9b37-8ae01ac8c3ee","subtype":"Figure","type":"Plot"},"ticker":{"id":"da025c33-af8a-45fb-807d-7f8736f81d09","type":"BasicTicker"}},"id":"f45af758-45bc-4254-8ae7-66431a4f7d55","type":"Grid"},{"attributes":{},"id":"5cbd2796-2002-4d2b-9204-0aa273ee681b","type":"BasicTickFormatter"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"size":{"units":"screen","value":10},"x":{"field":"x2"},"y":{"field":"y2"}},"id":"a21ed8ca-a363-4ab9-a79b-ef71b378b5e7","type":"Circle"},{"attributes":{"data_source":{"id":"24830875-f8af-4e67-9dc4-9fe6663bb2eb","type":"ColumnDataSource"},"glyph":{"id":"c17b756a-2fe8-4bac-905c-4b7b27f6492a","type":"Circle"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"81fcc1fe-d137-4cd6-9187-437d989fc662","type":"Circle"},"selection_glyph":null},"id":"9007bd36-6b69-4e4b-9b1f-0171a5667203","type":"GlyphRenderer"},{"attributes":{"plot":{"id":"52a25e03-5cb0-4ad1-8b82-995a1fe56eef","subtype":"Figure","type":"Plot"}},"id":"bd8a61f5-033e-42fa-b68c-7d0e8eceac60","type":"PanTool"},{"attributes":{"callback":null},"id":"4beb8765-750d-47e5-97ba-450f0e265a58","type":"DataRange1d"},{"attributes":{"callback":null},"id":"cce62636-078a-4adc-825b-20a3278e1b25","type":"DataRange1d"},{"attributes":{"plot":{"id":"3a6c2e92-493e-48b2-9b37-8ae01ac8c3ee","subtype":"Figure","type":"Plot"}},"id":"222a420b-56f4-4893-86b7-53d0ced2a013","type":"SaveTool"},{"attributes":{"plot":{"id":"52a25e03-5cb0-4ad1-8b82-995a1fe56eef","subtype":"Figure","type":"Plot"},"ticker":{"id":"1c906be0-ddc3-416c-a32b-58305d59fe36","type":"BasicTicker"}},"id":"5d05cf41-04d9-49c4-9aa3-dfaeebbbfc1f","type":"Grid"},{"attributes":{"plot":{"id":"52a25e03-5cb0-4ad1-8b82-995a1fe56eef","subtype":"Figure","type":"Plot"}},"id":"afade5df-a542-4001-9407-e5ddfcac12b3","type":"SaveTool"},{"attributes":{"axis_label":"no. of emails from POI to this person","formatter":{"id":"5cbd2796-2002-4d2b-9204-0aa273ee681b","type":"BasicTickFormatter"},"plot":{"id":"52a25e03-5cb0-4ad1-8b82-995a1fe56eef","subtype":"Figure","type":"Plot"},"ticker":{"id":"1c906be0-ddc3-416c-a32b-58305d59fe36","type":"BasicTicker"}},"id":"090b2a98-4a7d-4ecb-93eb-a029b48e0fa0","type":"LinearAxis"},{"attributes":{"callback":null},"id":"aa380f2e-a3fb-46b3-81d9-cfd273f0d406","type":"DataRange1d"},{"attributes":{"callback":null},"id":"d271de14-9bd9-4082-867e-69368ee266e2","type":"DataRange1d"}],"root_ids":["e2683ec1-cbf8-4675-8c31-51c595472fbf"]},"title":"Bokeh Application","version":"0.12.6"}};
            var render_items = [{"docid":"127802df-8918-4e52-84f6-ff9b9c2049a9","elementid":"c52c0df8-e360-41aa-b8bf-060e3473d2db","modelid":"e2683ec1-cbf8-4675-8c31-51c595472fbf"}];
            
            Bokeh.embed.embed_items(docs_json, render_items);
          };
          if (document.readyState != "loading") fn();
          else document.addEventListener("DOMContentLoaded", fn);
        })();
      },
      function(Bokeh) {
      }
    ];
  
    function run_inline_js() {
      
      if ((window.Bokeh !== undefined) || (force === true)) {
        for (var i = 0; i < inline_js.length; i++) {
          inline_js[i](window.Bokeh);
        }if (force === true) {
          display_loaded();
        }} else if (Date.now() < window._bokeh_timeout) {
        setTimeout(run_inline_js, 100);
      } else if (!window._bokeh_failed_load) {
        console.log("Bokeh: BokehJS failed to load within specified timeout.");
        window._bokeh_failed_load = true;
      } else if (force !== true) {
        var cell = $(document.getElementById("c52c0df8-e360-41aa-b8bf-060e3473d2db")).parents('.cell').data().cell;
        cell.output_area.append_execute_result(NB_LOAD_WARNING)
      }
  
    }
  
    if (window._bokeh_is_loading === 0) {
      console.log("Bokeh: BokehJS loaded, going straight to plotting");
      run_inline_js();
    } else {
      load_libs(js_urls, function() {
        console.log("Bokeh: BokehJS plotting callback run at", now());
        run_inline_js();
      });
    }
  }(this));
</script>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Feature-Scaling">Feature Scaling<a class="anchor-link" href="#Feature-Scaling">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I have used <strong>decision tree</strong> as my final algorithm. Algorithms like decision tree and linear regression don't require feature scaling, whereas Support Vector Machines (SVM) and k-means clustering does.</p>
<p><strong>SVM</strong> and <strong>k-means</strong> clustering calculate Euclidean distance between points. If one of the features has a large range, the distance will be governed by this particular feature. These classifiers are <strong>affine transformation variant</strong>.</p>
<p>In case of <strong>linear regression</strong>, there is a coefficient with each feature. If a feature has large ranges that do not effect the label, regression algorithm will make the corresponding coefficients small. Even in case of <strong>tree based algorithms</strong>, we don't have to worry about one dimension, when we are doing something with the other. These classifers are <strong>affine transformation invariant</strong>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Feature-Selection">Feature Selection<a class="anchor-link" href="#Feature-Selection">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [14]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># Store to my_dataset for easy export below.</span>
<span class="c1"># create a dictionary from the dataframe</span>
<span class="n">my_dataset</span> <span class="o">=</span> <span class="n">enron_data</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s1">'index'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Features $\neq$ Information. We want to have the minimum number of features than capture trends and patterns in our data. We want to get rid of features that don't give us any information. Machine learning algorithm is just going to be as good as the features we put into it. It is critical that the methodology deployed for feature selection must be scientific and exhaustive without room for intuition.</p>
<p>First I manually removed features which had more than 50% of the values missing (NaN), then I performed <a href="http://scikit-learn.org/stable/modules/feature_selection.html">SelectKBest</a> on remaining features and selected eight features with scores greater than 2.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [15]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.feature_selection</span> <span class="kn">import</span> <span class="n">SelectKBest</span><span class="p">,</span> <span class="n">f_classif</span>

<span class="n">features_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"poi"</span><span class="p">,</span> <span class="s2">"bonus"</span><span class="p">,</span> <span class="s2">"exercised_stock_options"</span><span class="p">,</span> <span class="s2">"expenses"</span><span class="p">,</span> <span class="s2">"other"</span><span class="p">,</span> <span class="s2">"restricted_stock"</span><span class="p">,</span> <span class="s2">"salary"</span><span class="p">,</span> 
                  <span class="s2">"shared_receipt_with_poi"</span><span class="p">,</span> <span class="s2">"total_payments"</span><span class="p">,</span> <span class="s2">"total_stock_value"</span><span class="p">,</span> <span class="s2">"fraction_to_poi"</span><span class="p">,</span>
                 <span class="s2">"fraction_from_poi"</span><span class="p">]</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">featureFormat</span><span class="p">(</span><span class="n">my_dataset</span><span class="p">,</span> <span class="n">features_list</span><span class="p">,</span> <span class="n">sort_keys</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">labels</span><span class="p">,</span> <span class="n">features</span> <span class="o">=</span> <span class="n">targetFeatureSplit</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># Perform feature selection</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">SelectKBest</span><span class="p">(</span><span class="n">f_classif</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">selector</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">labels</span><span class="p">)</span>

<span class="c1"># Get the raw p-values for each feature, and transform from p-values into scores</span>
<span class="n">scores</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">selector</span><span class="o">.</span><span class="n">pvalues_</span><span class="p">)</span>

<span class="c1"># Bokeh Barplots</span>
<span class="kn">from</span> <span class="nn">bkcharts</span> <span class="kn">import</span> <span class="n">Bar</span><span class="p">,</span> <span class="n">show</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'scores'</span><span class="p">:</span><span class="n">scores</span><span class="p">,</span> <span class="s1">'features'</span><span class="p">:</span><span class="n">features_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:]}</span>
<span class="n">bar</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">'features'</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">'scores'</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"Select K Best"</span><span class="p">,</span> 
          <span class="n">legend</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">plot_width</span> <span class="o">=</span> <span class="mi">450</span><span class="p">,</span> <span class="n">plot_height</span> <span class="o">=</span> <span class="mi">450</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">bar</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea ">
<div class="bk-root">
<div class="bk-plotdiv" id="7df42b6b-1575-4251-afd0-607e47e97678"></div>
</div>
<script type="text/javascript">
  
  (function(global) {
    function now() {
      return new Date();
    }
  
    var force = false;
  
    if (typeof (window._bokeh_onload_callbacks) === "undefined" || force === true) {
      window._bokeh_onload_callbacks = [];
      window._bokeh_is_loading = undefined;
    }
  
  
    
    if (typeof (window._bokeh_timeout) === "undefined" || force === true) {
      window._bokeh_timeout = Date.now() + 0;
      window._bokeh_failed_load = false;
    }
  
    var NB_LOAD_WARNING = {'data': {'text/html':
       "<div style='background-color: #fdd'>\n"+
       "<p>\n"+
       "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
       "may be due to a slow or bad network connection. Possible fixes:\n"+
       "</p>\n"+
       "<ul>\n"+
       "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
       "<li>use INLINE resources instead, as so:</li>\n"+
       "</ul>\n"+
       "<code>\n"+
       "from bokeh.resources import INLINE\n"+
       "output_notebook(resources=INLINE)\n"+
       "</code>\n"+
       "</div>"}};
  
    function display_loaded() {
      if (window.Bokeh !== undefined) {
        var el = document.getElementById("7df42b6b-1575-4251-afd0-607e47e97678");
        el.textContent = "BokehJS " + Bokeh.version + " successfully loaded.";
      } else if (Date.now() < window._bokeh_timeout) {
        setTimeout(display_loaded, 100)
      }
    }
  
    function run_callbacks() {
      try {
        window._bokeh_onload_callbacks.forEach(function(callback) { callback() });
      }
      finally {
        delete window._bokeh_onload_callbacks
      }
      console.info("Bokeh: all callbacks have finished");
    }
  
    function load_libs(js_urls, callback) {
      window._bokeh_onload_callbacks.push(callback);
      if (window._bokeh_is_loading > 0) {
        console.log("Bokeh: BokehJS is being loaded, scheduling callback at", now());
        return null;
      }
      if (js_urls == null || js_urls.length === 0) {
        run_callbacks();
        return null;
      }
      console.log("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
      window._bokeh_is_loading = js_urls.length;
      for (var i = 0; i < js_urls.length; i++) {
        var url = js_urls[i];
        var s = document.createElement('script');
        s.src = url;
        s.async = false;
        s.onreadystatechange = s.onload = function() {
          window._bokeh_is_loading--;
          if (window._bokeh_is_loading === 0) {
            console.log("Bokeh: all BokehJS libraries loaded");
            run_callbacks()
          }
        };
        s.onerror = function() {
          console.warn("failed to load library " + url);
        };
        console.log("Bokeh: injecting script tag for BokehJS library: ", url);
        document.getElementsByTagName("head")[0].appendChild(s);
      }
    };var element = document.getElementById("7df42b6b-1575-4251-afd0-607e47e97678");
    if (element == null) {
      console.log("Bokeh: ERROR: autoload.js configured with elementid '7df42b6b-1575-4251-afd0-607e47e97678' but no matching script tag was found. ")
      return false;
    }
  
    var js_urls = [];
  
    var inline_js = [
      function(Bokeh) {
        (function() {
          var fn = function() {
            var docs_json = {"d50dd91e-73c4-48b9-a180-1f6987487404":{"roots":{"references":[{"attributes":{"fill_alpha":{"field":"fill_alpha"},"fill_color":{"field":"color"},"height":{"field":"height","units":"data"},"line_color":{"field":"line_color"},"width":{"field":"width","units":"data"},"x":{"field":"x"},"y":{"field":"y"}},"id":"4105de49-cb0a-49a5-b3fb-1a98b77f5972","type":"Rect"},{"attributes":{},"id":"5990a4dd-e8eb-49ae-bec5-8a2137bc0359","type":"BasicTickFormatter"},{"attributes":{},"id":"1ae521dd-f7c9-4f72-95e7-7ab662cbdaf8","type":"CategoricalTicker"},{"attributes":{"callback":null,"end":6.0273750405400115},"id":"77d7fa1d-2673-49c6-8850-0754c8d71edf","type":"Range1d"},{"attributes":{"fill_alpha":{"field":"fill_alpha"},"fill_color":{"field":"color"},"height":{"field":"height","units":"data"},"line_color":{"field":"line_color"},"width":{"field":"width","units":"data"},"x":{"field":"x"},"y":{"field":"y"}},"id":"fd80e043-df17-4833-992b-6f5fed7b9f14","type":"Rect"},{"attributes":{"data_source":{"id":"8e6f394c-2b07-42f7-b202-be25a271be59","type":"ColumnDataSource"},"glyph":{"id":"d9a628c2-e289-4572-9da4-5de5baf5aae4","type":"Rect"},"hover_glyph":null,"muted_glyph":null},"id":"1ca105b0-8127-441b-89e5-82291a737065","type":"GlyphRenderer"},{"attributes":{"callback":null,"column_names":["line_color","line_alpha","color","fill_alpha","height","width","y","x","label"],"data":{"chart_index":[{"features":"fraction_from_poi"}],"color":["#f22c40"],"features":["fraction_from_poi"],"fill_alpha":[0.8],"height":[1.10173509818475],"label":[{"features":"fraction_from_poi"}],"line_alpha":[1.0],"line_color":["white"],"width":[0.8],"x":["fraction_from_poi"],"y":[0.550867549092375]}},"id":"8e6f394c-2b07-42f7-b202-be25a271be59","type":"ColumnDataSource"},{"attributes":{"fill_alpha":{"field":"fill_alpha"},"fill_color":{"field":"color"},"height":{"field":"height","units":"data"},"line_color":{"field":"line_color"},"width":{"field":"width","units":"data"},"x":{"field":"x"},"y":{"field":"y"}},"id":"444de6dd-5c0f-48a2-b759-c20e4e7f22a5","type":"Rect"},{"attributes":{"fill_alpha":{"field":"fill_alpha"},"fill_color":{"field":"color"},"height":{"field":"height","units":"data"},"line_color":{"field":"line_color"},"width":{"field":"width","units":"data"},"x":{"field":"x"},"y":{"field":"y"}},"id":"d9a628c2-e289-4572-9da4-5de5baf5aae4","type":"Rect"},{"attributes":{"callback":null,"column_names":["line_color","line_alpha","color","fill_alpha","height","width","y","x","label"],"data":{"chart_index":[{"features":"fraction_to_poi"}],"color":["#f22c40"],"features":["fraction_to_poi"],"fill_alpha":[0.8],"height":[4.076292220311065],"label":[{"features":"fraction_to_poi"}],"line_alpha":[1.0],"line_color":["white"],"width":[0.8],"x":["fraction_to_poi"],"y":[2.0381461101555325]}},"id":"85368f7a-b28d-4171-bb0b-ef46aa2f149f","type":"ColumnDataSource"},{"attributes":{"fill_alpha":{"field":"fill_alpha"},"fill_color":{"field":"color"},"height":{"field":"height","units":"data"},"line_color":{"field":"line_color"},"width":{"field":"width","units":"data"},"x":{"field":"x"},"y":{"field":"y"}},"id":"c46b7c8e-51c4-4d33-9457-b8fcae9464da","type":"Rect"},{"attributes":{"plot":{"id":"a42ca201-6fe9-41a2-bd98-33445c734118","subtype":"Chart","type":"Plot"}},"id":"588955d9-bd9d-4c5f-8f56-e14338899dab","type":"HelpTool"},{"attributes":{"fill_alpha":{"field":"fill_alpha"},"fill_color":{"field":"color"},"height":{"field":"height","units":"data"},"line_color":{"field":"line_color"},"width":{"field":"width","units":"data"},"x":{"field":"x"},"y":{"field":"y"}},"id":"40c25ac1-d810-4fb2-8c19-6399f9754df8","type":"Rect"},{"attributes":{"fill_alpha":{"field":"fill_alpha"},"fill_color":{"field":"color"},"height":{"field":"height","units":"data"},"line_color":{"field":"line_color"},"width":{"field":"width","units":"data"},"x":{"field":"x"},"y":{"field":"y"}},"id":"245b0cd2-9b94-4a46-97ec-7f50c9fe5851","type":"Rect"},{"attributes":{"data_source":{"id":"85368f7a-b28d-4171-bb0b-ef46aa2f149f","type":"ColumnDataSource"},"glyph":{"id":"4105de49-cb0a-49a5-b3fb-1a98b77f5972","type":"Rect"},"hover_glyph":null,"muted_glyph":null},"id":"a4e8ee39-d0c3-47a5-928e-5dff8d965176","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"edd46f70-c992-45c4-8e83-de7885f6e6db","type":"ColumnDataSource"},"glyph":{"id":"7807eeb6-d3b6-4e22-80d0-6b980e3a97dd","type":"Rect"},"hover_glyph":null,"muted_glyph":null},"id":"11540e9b-2f49-403f-b70d-30937ea925ed","type":"GlyphRenderer"},{"attributes":{"below":[{"id":"fb89e9bd-81e9-4c27-b7e0-80e911c37f83","type":"CategoricalAxis"}],"css_classes":null,"left":[{"id":"618cd295-beef-46f6-a6e9-9579ac04715a","type":"LinearAxis"}],"plot_height":450,"plot_width":450,"renderers":[{"id":"6d5cd68b-9b9c-436a-8893-be304ad0d51d","type":"BoxAnnotation"},{"id":"cf1c4282-ef5e-49a1-888b-a26c5b52695e","type":"GlyphRenderer"},{"id":"0a15f12a-3299-44aa-a094-8db404b2a0b8","type":"GlyphRenderer"},{"id":"6507b169-6e84-4eb8-b24a-1867d548612b","type":"GlyphRenderer"},{"id":"6babe7b5-07f2-493e-b823-2b6f0ffe3876","type":"GlyphRenderer"},{"id":"11540e9b-2f49-403f-b70d-30937ea925ed","type":"GlyphRenderer"},{"id":"6fc486a8-7c9f-4dd3-b2be-2cfd1324b9ea","type":"GlyphRenderer"},{"id":"aa32c510-3193-49da-aeb6-394b0310c006","type":"GlyphRenderer"},{"id":"23b55104-7353-48f2-92c0-7e7182f8f46d","type":"GlyphRenderer"},{"id":"acd08c0a-2bfb-4e32-afad-caf9187c9001","type":"GlyphRenderer"},{"id":"a4e8ee39-d0c3-47a5-928e-5dff8d965176","type":"GlyphRenderer"},{"id":"1ca105b0-8127-441b-89e5-82291a737065","type":"GlyphRenderer"},{"id":"fb89e9bd-81e9-4c27-b7e0-80e911c37f83","type":"CategoricalAxis"},{"id":"618cd295-beef-46f6-a6e9-9579ac04715a","type":"LinearAxis"},{"id":"6985aa67-0a08-47eb-856c-53a614921f2b","type":"Grid"}],"title":{"id":"e1e20b3c-3e97-4ad7-bed7-1556dab1c1ea","type":"Title"},"tool_events":{"id":"f52e8416-5268-4f59-8d3f-0b58560e02f9","type":"ToolEvents"},"toolbar":{"id":"dd91336a-8acf-4e09-9303-e91e6c3902d8","type":"Toolbar"},"x_range":{"id":"97bc54e7-cac6-46a0-88e8-eda1a5acd8bc","type":"FactorRange"},"x_scale":{"id":"7a12749b-1df6-428d-a7e4-67b692bbd2c6","type":"CategoricalScale"},"y_range":{"id":"77d7fa1d-2673-49c6-8850-0754c8d71edf","type":"Range1d"},"y_scale":{"id":"569cfa94-4d72-4767-9386-7189ee8c7537","type":"LinearScale"}},"id":"a42ca201-6fe9-41a2-bd98-33445c734118","subtype":"Chart","type":"Plot"},{"attributes":{"callback":null,"factors":["bonus","exercised_stock_options","expenses","fraction_from_poi","fraction_to_poi","other","restricted_stock","salary","shared_receipt_with_poi","total_payments","total_stock_value"]},"id":"97bc54e7-cac6-46a0-88e8-eda1a5acd8bc","type":"FactorRange"},{"attributes":{},"id":"7a12749b-1df6-428d-a7e4-67b692bbd2c6","type":"CategoricalScale"},{"attributes":{"data_source":{"id":"cf28a220-5a63-4beb-a5bd-73acdf3723eb","type":"ColumnDataSource"},"glyph":{"id":"80043643-a106-4e15-aaef-cbc234f22805","type":"Rect"},"hover_glyph":null,"muted_glyph":null},"id":"0a15f12a-3299-44aa-a094-8db404b2a0b8","type":"GlyphRenderer"},{"attributes":{"plot":{"id":"a42ca201-6fe9-41a2-bd98-33445c734118","subtype":"Chart","type":"Plot"}},"id":"3bacbe03-c09a-4f3a-8bf3-4d40b42fbb7d","type":"SaveTool"},{"attributes":{},"id":"0a89c26d-e124-4129-9f85-913a7add15d5","type":"CategoricalTickFormatter"},{"attributes":{"plot":{"id":"a42ca201-6fe9-41a2-bd98-33445c734118","subtype":"Chart","type":"Plot"}},"id":"01900988-bab0-4087-a386-a99398724ecb","type":"WheelZoomTool"},{"attributes":{"callback":null,"column_names":["line_color","line_alpha","color","fill_alpha","height","width","y","x","label"],"data":{"chart_index":[{"features":"expenses"}],"color":["#f22c40"],"features":["expenses"],"fill_alpha":[0.8],"height":[1.8309666095033812],"label":[{"features":"expenses"}],"line_alpha":[1.0],"line_color":["white"],"width":[0.8],"x":["expenses"],"y":[0.9154833047516906]}},"id":"b386af63-43dd-4908-aa62-2347c7d66c4b","type":"ColumnDataSource"},{"attributes":{"fill_alpha":{"field":"fill_alpha"},"fill_color":{"field":"color"},"height":{"field":"height","units":"data"},"line_color":{"field":"line_color"},"width":{"field":"width","units":"data"},"x":{"field":"x"},"y":{"field":"y"}},"id":"bc84c748-6b50-4db8-a168-3fe5c8d6a58e","type":"Rect"},{"attributes":{"callback":null,"column_names":["line_color","line_alpha","color","fill_alpha","height","width","y","x","label"],"data":{"chart_index":[{"features":"restricted_stock"}],"color":["#f22c40"],"features":["restricted_stock"],"fill_alpha":[0.8],"height":[2.543208542735528],"label":[{"features":"restricted_stock"}],"line_alpha":[1.0],"line_color":["white"],"width":[0.8],"x":["restricted_stock"],"y":[1.271604271367764]}},"id":"edd46f70-c992-45c4-8e83-de7885f6e6db","type":"ColumnDataSource"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"plot":null,"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"6d5cd68b-9b9c-436a-8893-be304ad0d51d","type":"BoxAnnotation"},{"attributes":{"callback":null,"column_names":["line_color","line_alpha","color","fill_alpha","height","width","y","x","label"],"data":{"chart_index":[{"features":"exercised_stock_options"}],"color":["#f22c40"],"features":["exercised_stock_options"],"fill_alpha":[0.8],"height":[5.740357181466678],"label":[{"features":"exercised_stock_options"}],"line_alpha":[1.0],"line_color":["white"],"width":[0.8],"x":["exercised_stock_options"],"y":[2.870178590733339]}},"id":"cf28a220-5a63-4beb-a5bd-73acdf3723eb","type":"ColumnDataSource"},{"attributes":{"overlay":{"id":"6d5cd68b-9b9c-436a-8893-be304ad0d51d","type":"BoxAnnotation"},"plot":{"id":"a42ca201-6fe9-41a2-bd98-33445c734118","subtype":"Chart","type":"Plot"}},"id":"962af262-d1d4-4d48-a49d-47ee8d5913e2","type":"BoxZoomTool"},{"attributes":{"fill_alpha":{"field":"fill_alpha"},"fill_color":{"field":"color"},"height":{"field":"height","units":"data"},"line_color":{"field":"line_color"},"width":{"field":"width","units":"data"},"x":{"field":"x"},"y":{"field":"y"}},"id":"80043643-a106-4e15-aaef-cbc234f22805","type":"Rect"},{"attributes":{"callback":null,"column_names":["line_color","line_alpha","color","fill_alpha","height","width","y","x","label"],"data":{"chart_index":[{"features":"bonus"}],"color":["#f22c40"],"features":["bonus"],"fill_alpha":[0.8],"height":[4.958094860652936],"label":[{"features":"bonus"}],"line_alpha":[1.0],"line_color":["white"],"width":[0.8],"x":["bonus"],"y":[2.479047430326468]}},"id":"8bf19ab1-5fda-4b27-9aa5-66ef41bbdb14","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"f5bd2b97-4ed7-4e98-82f3-de6f629d21ca","type":"ColumnDataSource"},"glyph":{"id":"bc84c748-6b50-4db8-a168-3fe5c8d6a58e","type":"Rect"},"hover_glyph":null,"muted_glyph":null},"id":"23b55104-7353-48f2-92c0-7e7182f8f46d","type":"GlyphRenderer"},{"attributes":{"axis_label":"Features","formatter":{"id":"0a89c26d-e124-4129-9f85-913a7add15d5","type":"CategoricalTickFormatter"},"major_label_orientation":0.7853981633974483,"plot":{"id":"a42ca201-6fe9-41a2-bd98-33445c734118","subtype":"Chart","type":"Plot"},"ticker":{"id":"1ae521dd-f7c9-4f72-95e7-7ab662cbdaf8","type":"CategoricalTicker"}},"id":"fb89e9bd-81e9-4c27-b7e0-80e911c37f83","type":"CategoricalAxis"},{"attributes":{"callback":null,"column_names":["line_color","line_alpha","color","fill_alpha","height","width","y","x","label"],"data":{"chart_index":[{"features":"salary"}],"color":["#f22c40"],"features":["salary"],"fill_alpha":[0.8],"height":[4.458636238488813],"label":[{"features":"salary"}],"line_alpha":[1.0],"line_color":["white"],"width":[0.8],"x":["salary"],"y":[2.2293181192444065]}},"id":"81014260-555c-49ca-85e7-d6936c5bcf51","type":"ColumnDataSource"},{"attributes":{"callback":null,"column_names":["line_color","line_alpha","color","fill_alpha","height","width","y","x","label"],"data":{"chart_index":[{"features":"shared_receipt_with_poi"}],"color":["#f22c40"],"features":["shared_receipt_with_poi"],"fill_alpha":[0.8],"height":[2.40386464353768],"label":[{"features":"shared_receipt_with_poi"}],"line_alpha":[1.0],"line_color":["white"],"width":[0.8],"x":["shared_receipt_with_poi"],"y":[1.20193232176884]}},"id":"943874e7-2000-4b91-8626-d46acbb49bb6","type":"ColumnDataSource"},{"attributes":{"callback":null,"column_names":["line_color","line_alpha","color","fill_alpha","height","width","y","x","label"],"data":{"chart_index":[{"features":"total_payments"}],"color":["#f22c40"],"features":["total_payments"],"fill_alpha":[0.8],"height":[2.4449870742699775],"label":[{"features":"total_payments"}],"line_alpha":[1.0],"line_color":["white"],"width":[0.8],"x":["total_payments"],"y":[1.2224935371349888]}},"id":"f5bd2b97-4ed7-4e98-82f3-de6f629d21ca","type":"ColumnDataSource"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_scroll":"auto","active_tap":"auto","tools":[{"id":"e5659882-255c-4048-86c7-c9d7c01e70d1","type":"PanTool"},{"id":"01900988-bab0-4087-a386-a99398724ecb","type":"WheelZoomTool"},{"id":"962af262-d1d4-4d48-a49d-47ee8d5913e2","type":"BoxZoomTool"},{"id":"3bacbe03-c09a-4f3a-8bf3-4d40b42fbb7d","type":"SaveTool"},{"id":"cb545981-b25d-44d6-95aa-7b0a2b2973f1","type":"ResetTool"},{"id":"588955d9-bd9d-4c5f-8f56-e14338899dab","type":"HelpTool"}]},"id":"dd91336a-8acf-4e09-9303-e91e6c3902d8","type":"Toolbar"},{"attributes":{"data_source":{"id":"be273377-aaf0-4a2a-8cab-0e2db7f39e99","type":"ColumnDataSource"},"glyph":{"id":"444de6dd-5c0f-48a2-b759-c20e4e7f22a5","type":"Rect"},"hover_glyph":null,"muted_glyph":null},"id":"6babe7b5-07f2-493e-b823-2b6f0ffe3876","type":"GlyphRenderer"},{"attributes":{"axis_label":"Sum( Scores )","formatter":{"id":"5990a4dd-e8eb-49ae-bec5-8a2137bc0359","type":"BasicTickFormatter"},"plot":{"id":"a42ca201-6fe9-41a2-bd98-33445c734118","subtype":"Chart","type":"Plot"},"ticker":{"id":"0b28094b-cf46-49cd-a906-2977248e0ca5","type":"BasicTicker"}},"id":"618cd295-beef-46f6-a6e9-9579ac04715a","type":"LinearAxis"},{"attributes":{"data_source":{"id":"8bf19ab1-5fda-4b27-9aa5-66ef41bbdb14","type":"ColumnDataSource"},"glyph":{"id":"40c25ac1-d810-4fb2-8c19-6399f9754df8","type":"Rect"},"hover_glyph":null,"muted_glyph":null},"id":"cf1c4282-ef5e-49a1-888b-a26c5b52695e","type":"GlyphRenderer"},{"attributes":{"callback":null,"column_names":["line_color","line_alpha","color","fill_alpha","height","width","y","x","label"],"data":{"chart_index":[{"features":"other"}],"color":["#f22c40"],"features":["other"],"fill_alpha":[0.8],"height":[1.3707765246201635],"label":[{"features":"other"}],"line_alpha":[1.0],"line_color":["white"],"width":[0.8],"x":["other"],"y":[0.6853882623100818]}},"id":"be273377-aaf0-4a2a-8cab-0e2db7f39e99","type":"ColumnDataSource"},{"attributes":{"dimension":1,"plot":{"id":"a42ca201-6fe9-41a2-bd98-33445c734118","subtype":"Chart","type":"Plot"},"ticker":{"id":"0b28094b-cf46-49cd-a906-2977248e0ca5","type":"BasicTicker"}},"id":"6985aa67-0a08-47eb-856c-53a614921f2b","type":"Grid"},{"attributes":{"data_source":{"id":"81014260-555c-49ca-85e7-d6936c5bcf51","type":"ColumnDataSource"},"glyph":{"id":"219d1da3-5195-4dc3-95fd-42eacc8e9032","type":"Rect"},"hover_glyph":null,"muted_glyph":null},"id":"6fc486a8-7c9f-4dd3-b2be-2cfd1324b9ea","type":"GlyphRenderer"},{"attributes":{"fill_alpha":{"field":"fill_alpha"},"fill_color":{"field":"color"},"height":{"field":"height","units":"data"},"line_color":{"field":"line_color"},"width":{"field":"width","units":"data"},"x":{"field":"x"},"y":{"field":"y"}},"id":"219d1da3-5195-4dc3-95fd-42eacc8e9032","type":"Rect"},{"attributes":{"data_source":{"id":"b386af63-43dd-4908-aa62-2347c7d66c4b","type":"ColumnDataSource"},"glyph":{"id":"245b0cd2-9b94-4a46-97ec-7f50c9fe5851","type":"Rect"},"hover_glyph":null,"muted_glyph":null},"id":"6507b169-6e84-4eb8-b24a-1867d548612b","type":"GlyphRenderer"},{"attributes":{},"id":"569cfa94-4d72-4767-9386-7189ee8c7537","type":"LinearScale"},{"attributes":{"data_source":{"id":"943874e7-2000-4b91-8626-d46acbb49bb6","type":"ColumnDataSource"},"glyph":{"id":"c46b7c8e-51c4-4d33-9457-b8fcae9464da","type":"Rect"},"hover_glyph":null,"muted_glyph":null},"id":"aa32c510-3193-49da-aeb6-394b0310c006","type":"GlyphRenderer"},{"attributes":{},"id":"0b28094b-cf46-49cd-a906-2977248e0ca5","type":"BasicTicker"},{"attributes":{"callback":null,"column_names":["line_color","line_alpha","color","fill_alpha","height","width","y","x","label"],"data":{"chart_index":[{"features":"total_stock_value"}],"color":["#f22c40"],"features":["total_stock_value"],"fill_alpha":[0.8],"height":[5.61900858422821],"label":[{"features":"total_stock_value"}],"line_alpha":[1.0],"line_color":["white"],"width":[0.8],"x":["total_stock_value"],"y":[2.809504292114105]}},"id":"9c69c6e5-7d00-498c-81d6-55d469a750c9","type":"ColumnDataSource"},{"attributes":{"plot":{"id":"a42ca201-6fe9-41a2-bd98-33445c734118","subtype":"Chart","type":"Plot"}},"id":"e5659882-255c-4048-86c7-c9d7c01e70d1","type":"PanTool"},{"attributes":{"plot":{"id":"a42ca201-6fe9-41a2-bd98-33445c734118","subtype":"Chart","type":"Plot"}},"id":"cb545981-b25d-44d6-95aa-7b0a2b2973f1","type":"ResetTool"},{"attributes":{"plot":null,"text":"Select K Best"},"id":"e1e20b3c-3e97-4ad7-bed7-1556dab1c1ea","type":"Title"},{"attributes":{"data_source":{"id":"9c69c6e5-7d00-498c-81d6-55d469a750c9","type":"ColumnDataSource"},"glyph":{"id":"fd80e043-df17-4833-992b-6f5fed7b9f14","type":"Rect"},"hover_glyph":null,"muted_glyph":null},"id":"acd08c0a-2bfb-4e32-afad-caf9187c9001","type":"GlyphRenderer"},{"attributes":{},"id":"f52e8416-5268-4f59-8d3f-0b58560e02f9","type":"ToolEvents"},{"attributes":{"fill_alpha":{"field":"fill_alpha"},"fill_color":{"field":"color"},"height":{"field":"height","units":"data"},"line_color":{"field":"line_color"},"width":{"field":"width","units":"data"},"x":{"field":"x"},"y":{"field":"y"}},"id":"7807eeb6-d3b6-4e22-80d0-6b980e3a97dd","type":"Rect"}],"root_ids":["a42ca201-6fe9-41a2-bd98-33445c734118"]},"title":"Bokeh Application","version":"0.12.6"}};
            var render_items = [{"docid":"d50dd91e-73c4-48b9-a180-1f6987487404","elementid":"7df42b6b-1575-4251-afd0-607e47e97678","modelid":"a42ca201-6fe9-41a2-bd98-33445c734118"}];
            
            Bokeh.embed.embed_items(docs_json, render_items);
          };
          if (document.readyState != "loading") fn();
          else document.addEventListener("DOMContentLoaded", fn);
        })();
      },
      function(Bokeh) {
      }
    ];
  
    function run_inline_js() {
      
      if ((window.Bokeh !== undefined) || (force === true)) {
        for (var i = 0; i < inline_js.length; i++) {
          inline_js[i](window.Bokeh);
        }if (force === true) {
          display_loaded();
        }} else if (Date.now() < window._bokeh_timeout) {
        setTimeout(run_inline_js, 100);
      } else if (!window._bokeh_failed_load) {
        console.log("Bokeh: BokehJS failed to load within specified timeout.");
        window._bokeh_failed_load = true;
      } else if (force !== true) {
        var cell = $(document.getElementById("7df42b6b-1575-4251-afd0-607e47e97678")).parents('.cell').data().cell;
        cell.output_area.append_execute_result(NB_LOAD_WARNING)
      }
  
    }
  
    if (window._bokeh_is_loading === 0) {
      console.log("Bokeh: BokehJS loaded, going straight to plotting");
      run_inline_js();
    } else {
      load_libs(js_urls, function() {
        console.log("Bokeh: BokehJS plotting callback run at", now());
        run_inline_js();
      });
    }
  }(this));
</script>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally, I used <a href="http://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeClassifier.html">'feature_importances'</a> attribute of my Decision Tree classifier to select  four features (bonus, exercised_stock_options, fraction_to_poi and shared_receipt_with_poi) that maximized my F1 score. Implementing my final algorithm without the newly engineered feature fraction_to_poi, dropped my F1-score by 74% (from 0.47547 to 0.12157). This also shows the effect of this feature on the final algorithm performance.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [16]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">features_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"poi"</span><span class="p">,</span> <span class="s2">"bonus"</span><span class="p">,</span> <span class="s2">"exercised_stock_options"</span><span class="p">,</span> 
                 <span class="s2">"fraction_to_poi"</span><span class="p">,</span> <span class="s2">"shared_receipt_with_poi"</span><span class="p">]</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">featureFormat</span><span class="p">(</span><span class="n">my_dataset</span><span class="p">,</span> <span class="n">features_list</span><span class="p">,</span> <span class="n">sort_keys</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">labels</span><span class="p">,</span> <span class="n">features</span> <span class="o">=</span> <span class="n">targetFeatureSplit</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [17]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># These are feature importance I obtained from running my final classiifer and testing it with tester.py.</span>
<span class="c1"># Check Algorithm Performance section below.</span>
<span class="n">feature_importances</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.13442256</span><span class="p">,</span> <span class="mf">0.0433088</span><span class="p">,</span> <span class="mf">0.48651064</span><span class="p">,</span> <span class="mf">0.335758</span><span class="p">]</span>
<span class="kn">from</span> <span class="nn">bkcharts</span> <span class="kn">import</span> <span class="n">Bar</span><span class="p">,</span> <span class="n">show</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'importance'</span><span class="p">:</span><span class="n">feature_importances</span><span class="p">,</span> <span class="s1">'features'</span><span class="p">:</span><span class="n">features_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:]}</span>
<span class="n">bar</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">'features'</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">'importance'</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"Feature importances from fitted Decision Tree"</span><span class="p">,</span> 
          <span class="n">legend</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">plot_width</span> <span class="o">=</span> <span class="mi">400</span><span class="p">,</span> <span class="n">plot_height</span> <span class="o">=</span> <span class="mi">400</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">bar</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea ">
<div class="bk-root">
<div class="bk-plotdiv" id="f0ceef28-a8ad-4360-9c71-51b28c40ae1f"></div>
</div>
<script type="text/javascript">
  
  (function(global) {
    function now() {
      return new Date();
    }
  
    var force = false;
  
    if (typeof (window._bokeh_onload_callbacks) === "undefined" || force === true) {
      window._bokeh_onload_callbacks = [];
      window._bokeh_is_loading = undefined;
    }
  
  
    
    if (typeof (window._bokeh_timeout) === "undefined" || force === true) {
      window._bokeh_timeout = Date.now() + 0;
      window._bokeh_failed_load = false;
    }
  
    var NB_LOAD_WARNING = {'data': {'text/html':
       "<div style='background-color: #fdd'>\n"+
       "<p>\n"+
       "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
       "may be due to a slow or bad network connection. Possible fixes:\n"+
       "</p>\n"+
       "<ul>\n"+
       "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
       "<li>use INLINE resources instead, as so:</li>\n"+
       "</ul>\n"+
       "<code>\n"+
       "from bokeh.resources import INLINE\n"+
       "output_notebook(resources=INLINE)\n"+
       "</code>\n"+
       "</div>"}};
  
    function display_loaded() {
      if (window.Bokeh !== undefined) {
        var el = document.getElementById("f0ceef28-a8ad-4360-9c71-51b28c40ae1f");
        el.textContent = "BokehJS " + Bokeh.version + " successfully loaded.";
      } else if (Date.now() < window._bokeh_timeout) {
        setTimeout(display_loaded, 100)
      }
    }
  
    function run_callbacks() {
      try {
        window._bokeh_onload_callbacks.forEach(function(callback) { callback() });
      }
      finally {
        delete window._bokeh_onload_callbacks
      }
      console.info("Bokeh: all callbacks have finished");
    }
  
    function load_libs(js_urls, callback) {
      window._bokeh_onload_callbacks.push(callback);
      if (window._bokeh_is_loading > 0) {
        console.log("Bokeh: BokehJS is being loaded, scheduling callback at", now());
        return null;
      }
      if (js_urls == null || js_urls.length === 0) {
        run_callbacks();
        return null;
      }
      console.log("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
      window._bokeh_is_loading = js_urls.length;
      for (var i = 0; i < js_urls.length; i++) {
        var url = js_urls[i];
        var s = document.createElement('script');
        s.src = url;
        s.async = false;
        s.onreadystatechange = s.onload = function() {
          window._bokeh_is_loading--;
          if (window._bokeh_is_loading === 0) {
            console.log("Bokeh: all BokehJS libraries loaded");
            run_callbacks()
          }
        };
        s.onerror = function() {
          console.warn("failed to load library " + url);
        };
        console.log("Bokeh: injecting script tag for BokehJS library: ", url);
        document.getElementsByTagName("head")[0].appendChild(s);
      }
    };var element = document.getElementById("f0ceef28-a8ad-4360-9c71-51b28c40ae1f");
    if (element == null) {
      console.log("Bokeh: ERROR: autoload.js configured with elementid 'f0ceef28-a8ad-4360-9c71-51b28c40ae1f' but no matching script tag was found. ")
      return false;
    }
  
    var js_urls = [];
  
    var inline_js = [
      function(Bokeh) {
        (function() {
          var fn = function() {
            var docs_json = {"8a87c448-c0a8-43af-a5cf-44bb86ac44f8":{"roots":{"references":[{"attributes":{},"id":"76746626-d524-4b10-b42d-3ccee20a8811","type":"CategoricalScale"},{"attributes":{"callback":null,"end":0.510836172},"id":"cd5384a4-3b69-46a8-a8ad-833889a2dbb9","type":"Range1d"},{"attributes":{"overlay":{"id":"6b3ad186-0675-4d9e-bc73-e1a665c9166e","type":"BoxAnnotation"},"plot":{"id":"e6b7dfa2-4b0f-4a6f-8f9d-0015cda7b6c7","subtype":"Chart","type":"Plot"}},"id":"acfc23be-1be2-4ed9-92c0-54a6a4bc4417","type":"BoxZoomTool"},{"attributes":{},"id":"3c08d2d9-3212-4eb2-8131-56040bdc2c4e","type":"CategoricalTickFormatter"},{"attributes":{"plot":null,"text":"Feature importances from fitted Decision Tree"},"id":"90b57fa1-97c6-4811-9bac-652518504eb1","type":"Title"},{"attributes":{"plot":{"id":"e6b7dfa2-4b0f-4a6f-8f9d-0015cda7b6c7","subtype":"Chart","type":"Plot"}},"id":"6eaca5a1-ed8d-4a07-b3d0-a8e48a058b26","type":"WheelZoomTool"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"plot":null,"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"6b3ad186-0675-4d9e-bc73-e1a665c9166e","type":"BoxAnnotation"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_scroll":"auto","active_tap":"auto","tools":[{"id":"8005fd1b-41ac-4b08-b04b-718737281a6f","type":"PanTool"},{"id":"6eaca5a1-ed8d-4a07-b3d0-a8e48a058b26","type":"WheelZoomTool"},{"id":"acfc23be-1be2-4ed9-92c0-54a6a4bc4417","type":"BoxZoomTool"},{"id":"d290afc2-b7e7-4631-87d4-45d7562bf794","type":"SaveTool"},{"id":"f64471fb-5d9d-4ae3-b539-7a2e35d4dc64","type":"ResetTool"},{"id":"45d918f1-354f-4b12-ab73-6606b030d7e6","type":"HelpTool"}]},"id":"4c3c11c7-56aa-4c59-8ef3-887b6d5b722e","type":"Toolbar"},{"attributes":{"callback":null,"column_names":["line_color","line_alpha","color","fill_alpha","height","width","y","x","label"],"data":{"chart_index":[{"features":"fraction_to_poi"}],"color":["#f22c40"],"features":["fraction_to_poi"],"fill_alpha":[0.8],"height":[0.48651064],"label":[{"features":"fraction_to_poi"}],"line_alpha":[1.0],"line_color":["white"],"width":[0.8],"x":["fraction_to_poi"],"y":[0.24325532]}},"id":"e3b1a3d9-bd02-40b1-8ef8-4c3e7aeba02d","type":"ColumnDataSource"},{"attributes":{"fill_alpha":{"field":"fill_alpha"},"fill_color":{"field":"color"},"height":{"field":"height","units":"data"},"line_color":{"field":"line_color"},"width":{"field":"width","units":"data"},"x":{"field":"x"},"y":{"field":"y"}},"id":"73b1d5c0-bbad-409d-b4a5-5ac69a5ca136","type":"Rect"},{"attributes":{},"id":"dfc2b8db-6094-4a6f-8305-0d79b583a06f","type":"BasicTicker"},{"attributes":{"callback":null,"column_names":["line_color","line_alpha","color","fill_alpha","height","width","y","x","label"],"data":{"chart_index":[{"features":"exercised_stock_options"}],"color":["#f22c40"],"features":["exercised_stock_options"],"fill_alpha":[0.8],"height":[0.0433088],"label":[{"features":"exercised_stock_options"}],"line_alpha":[1.0],"line_color":["white"],"width":[0.8],"x":["exercised_stock_options"],"y":[0.0216544]}},"id":"180061bd-f08e-4fd3-9f8f-97187cf03ce6","type":"ColumnDataSource"},{"attributes":{"below":[{"id":"31bca2c6-77b7-4981-9834-d13ea72fe1dc","type":"CategoricalAxis"}],"css_classes":null,"left":[{"id":"4f564e5b-8f2f-477f-88ce-c5e52169dd82","type":"LinearAxis"}],"plot_height":400,"plot_width":400,"renderers":[{"id":"6b3ad186-0675-4d9e-bc73-e1a665c9166e","type":"BoxAnnotation"},{"id":"c85570f4-2e0e-433c-b894-3756b6824168","type":"GlyphRenderer"},{"id":"91996bb4-9756-4444-ad28-368bf991a9cb","type":"GlyphRenderer"},{"id":"e6ab32a6-2ea8-47ee-aa17-3a4b99b23753","type":"GlyphRenderer"},{"id":"45b05717-4fdd-487b-8e91-73e19627079a","type":"GlyphRenderer"},{"id":"31bca2c6-77b7-4981-9834-d13ea72fe1dc","type":"CategoricalAxis"},{"id":"4f564e5b-8f2f-477f-88ce-c5e52169dd82","type":"LinearAxis"},{"id":"24b9170a-5d86-4a74-b22f-bc0a5e9db0bb","type":"Grid"}],"title":{"id":"90b57fa1-97c6-4811-9bac-652518504eb1","type":"Title"},"tool_events":{"id":"547128c1-6736-4ee7-b1d8-49868b7ffdbd","type":"ToolEvents"},"toolbar":{"id":"4c3c11c7-56aa-4c59-8ef3-887b6d5b722e","type":"Toolbar"},"x_range":{"id":"bfc03d53-7283-4411-a8bf-bcd25d29e574","type":"FactorRange"},"x_scale":{"id":"76746626-d524-4b10-b42d-3ccee20a8811","type":"CategoricalScale"},"y_range":{"id":"cd5384a4-3b69-46a8-a8ad-833889a2dbb9","type":"Range1d"},"y_scale":{"id":"d28564f7-cd49-4c8b-86f7-4b4134f387e3","type":"LinearScale"}},"id":"e6b7dfa2-4b0f-4a6f-8f9d-0015cda7b6c7","subtype":"Chart","type":"Plot"},{"attributes":{"dimension":1,"plot":{"id":"e6b7dfa2-4b0f-4a6f-8f9d-0015cda7b6c7","subtype":"Chart","type":"Plot"},"ticker":{"id":"dfc2b8db-6094-4a6f-8305-0d79b583a06f","type":"BasicTicker"}},"id":"24b9170a-5d86-4a74-b22f-bc0a5e9db0bb","type":"Grid"},{"attributes":{"callback":null,"column_names":["line_color","line_alpha","color","fill_alpha","height","width","y","x","label"],"data":{"chart_index":[{"features":"shared_receipt_with_poi"}],"color":["#f22c40"],"features":["shared_receipt_with_poi"],"fill_alpha":[0.8],"height":[0.335758],"label":[{"features":"shared_receipt_with_poi"}],"line_alpha":[1.0],"line_color":["white"],"width":[0.8],"x":["shared_receipt_with_poi"],"y":[0.167879]}},"id":"3acbde0d-461c-4085-94c3-91bd61310201","type":"ColumnDataSource"},{"attributes":{},"id":"e625e880-eee3-4538-a58a-28639b33ccaa","type":"CategoricalTicker"},{"attributes":{"callback":null,"factors":["bonus","exercised_stock_options","fraction_to_poi","shared_receipt_with_poi"]},"id":"bfc03d53-7283-4411-a8bf-bcd25d29e574","type":"FactorRange"},{"attributes":{"axis_label":"Sum( Importance )","formatter":{"id":"91bb473a-fb74-454d-8242-ac76040c8746","type":"BasicTickFormatter"},"plot":{"id":"e6b7dfa2-4b0f-4a6f-8f9d-0015cda7b6c7","subtype":"Chart","type":"Plot"},"ticker":{"id":"dfc2b8db-6094-4a6f-8305-0d79b583a06f","type":"BasicTicker"}},"id":"4f564e5b-8f2f-477f-88ce-c5e52169dd82","type":"LinearAxis"},{"attributes":{"axis_label":"Features","formatter":{"id":"3c08d2d9-3212-4eb2-8131-56040bdc2c4e","type":"CategoricalTickFormatter"},"major_label_orientation":0.7853981633974483,"plot":{"id":"e6b7dfa2-4b0f-4a6f-8f9d-0015cda7b6c7","subtype":"Chart","type":"Plot"},"ticker":{"id":"e625e880-eee3-4538-a58a-28639b33ccaa","type":"CategoricalTicker"}},"id":"31bca2c6-77b7-4981-9834-d13ea72fe1dc","type":"CategoricalAxis"},{"attributes":{"data_source":{"id":"3acbde0d-461c-4085-94c3-91bd61310201","type":"ColumnDataSource"},"glyph":{"id":"a3761dbf-ad43-4317-87cc-0f1b5c993c82","type":"Rect"},"hover_glyph":null,"muted_glyph":null},"id":"45b05717-4fdd-487b-8e91-73e19627079a","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"e3b1a3d9-bd02-40b1-8ef8-4c3e7aeba02d","type":"ColumnDataSource"},"glyph":{"id":"320462c9-46dc-4ff1-b585-1b342654046e","type":"Rect"},"hover_glyph":null,"muted_glyph":null},"id":"e6ab32a6-2ea8-47ee-aa17-3a4b99b23753","type":"GlyphRenderer"},{"attributes":{"fill_alpha":{"field":"fill_alpha"},"fill_color":{"field":"color"},"height":{"field":"height","units":"data"},"line_color":{"field":"line_color"},"width":{"field":"width","units":"data"},"x":{"field":"x"},"y":{"field":"y"}},"id":"5a9dcdfa-7339-4c68-ab4f-587762c41d64","type":"Rect"},{"attributes":{},"id":"547128c1-6736-4ee7-b1d8-49868b7ffdbd","type":"ToolEvents"},{"attributes":{},"id":"d28564f7-cd49-4c8b-86f7-4b4134f387e3","type":"LinearScale"},{"attributes":{},"id":"91bb473a-fb74-454d-8242-ac76040c8746","type":"BasicTickFormatter"},{"attributes":{"plot":{"id":"e6b7dfa2-4b0f-4a6f-8f9d-0015cda7b6c7","subtype":"Chart","type":"Plot"}},"id":"8005fd1b-41ac-4b08-b04b-718737281a6f","type":"PanTool"},{"attributes":{"callback":null,"column_names":["line_color","line_alpha","color","fill_alpha","height","width","y","x","label"],"data":{"chart_index":[{"features":"bonus"}],"color":["#f22c40"],"features":["bonus"],"fill_alpha":[0.8],"height":[0.13442256],"label":[{"features":"bonus"}],"line_alpha":[1.0],"line_color":["white"],"width":[0.8],"x":["bonus"],"y":[0.06721128]}},"id":"c4489940-60d0-40f7-b0ba-212ed072ffe4","type":"ColumnDataSource"},{"attributes":{"plot":{"id":"e6b7dfa2-4b0f-4a6f-8f9d-0015cda7b6c7","subtype":"Chart","type":"Plot"}},"id":"d290afc2-b7e7-4631-87d4-45d7562bf794","type":"SaveTool"},{"attributes":{"fill_alpha":{"field":"fill_alpha"},"fill_color":{"field":"color"},"height":{"field":"height","units":"data"},"line_color":{"field":"line_color"},"width":{"field":"width","units":"data"},"x":{"field":"x"},"y":{"field":"y"}},"id":"320462c9-46dc-4ff1-b585-1b342654046e","type":"Rect"},{"attributes":{"plot":{"id":"e6b7dfa2-4b0f-4a6f-8f9d-0015cda7b6c7","subtype":"Chart","type":"Plot"}},"id":"f64471fb-5d9d-4ae3-b539-7a2e35d4dc64","type":"ResetTool"},{"attributes":{"data_source":{"id":"180061bd-f08e-4fd3-9f8f-97187cf03ce6","type":"ColumnDataSource"},"glyph":{"id":"73b1d5c0-bbad-409d-b4a5-5ac69a5ca136","type":"Rect"},"hover_glyph":null,"muted_glyph":null},"id":"91996bb4-9756-4444-ad28-368bf991a9cb","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"c4489940-60d0-40f7-b0ba-212ed072ffe4","type":"ColumnDataSource"},"glyph":{"id":"5a9dcdfa-7339-4c68-ab4f-587762c41d64","type":"Rect"},"hover_glyph":null,"muted_glyph":null},"id":"c85570f4-2e0e-433c-b894-3756b6824168","type":"GlyphRenderer"},{"attributes":{"fill_alpha":{"field":"fill_alpha"},"fill_color":{"field":"color"},"height":{"field":"height","units":"data"},"line_color":{"field":"line_color"},"width":{"field":"width","units":"data"},"x":{"field":"x"},"y":{"field":"y"}},"id":"a3761dbf-ad43-4317-87cc-0f1b5c993c82","type":"Rect"},{"attributes":{"plot":{"id":"e6b7dfa2-4b0f-4a6f-8f9d-0015cda7b6c7","subtype":"Chart","type":"Plot"}},"id":"45d918f1-354f-4b12-ab73-6606b030d7e6","type":"HelpTool"}],"root_ids":["e6b7dfa2-4b0f-4a6f-8f9d-0015cda7b6c7"]},"title":"Bokeh Application","version":"0.12.6"}};
            var render_items = [{"docid":"8a87c448-c0a8-43af-a5cf-44bb86ac44f8","elementid":"f0ceef28-a8ad-4360-9c71-51b28c40ae1f","modelid":"e6b7dfa2-4b0f-4a6f-8f9d-0015cda7b6c7"}];
            
            Bokeh.embed.embed_items(docs_json, render_items);
          };
          if (document.readyState != "loading") fn();
          else document.addEventListener("DOMContentLoaded", fn);
        })();
      },
      function(Bokeh) {
      }
    ];
  
    function run_inline_js() {
      
      if ((window.Bokeh !== undefined) || (force === true)) {
        for (var i = 0; i < inline_js.length; i++) {
          inline_js[i](window.Bokeh);
        }if (force === true) {
          display_loaded();
        }} else if (Date.now() < window._bokeh_timeout) {
        setTimeout(run_inline_js, 100);
      } else if (!window._bokeh_failed_load) {
        console.log("Bokeh: BokehJS failed to load within specified timeout.");
        window._bokeh_failed_load = true;
      } else if (force !== true) {
        var cell = $(document.getElementById("f0ceef28-a8ad-4360-9c71-51b28c40ae1f")).parents('.cell').data().cell;
        cell.output_area.append_execute_result(NB_LOAD_WARNING)
      }
  
    }
  
    if (window._bokeh_is_loading === 0) {
      console.log("Bokeh: BokehJS loaded, going straight to plotting");
      run_inline_js();
    } else {
      load_libs(js_urls, function() {
        console.log("Bokeh: BokehJS plotting callback run at", now());
        run_inline_js();
      });
    }
  }(this));
</script>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Pick-and-Tune-an-Algorithm">Pick and Tune an Algorithm<a class="anchor-link" href="#Pick-and-Tune-an-Algorithm">¶</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p>What algorithm did you end up using? What other one(s) did you try? How did model performance differ between algorithms?</p>
</blockquote>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Pick-an-algorithm">Pick an algorithm<a class="anchor-link" href="#Pick-an-algorithm">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Different algorithms were attempted using the four best features:- bonus, exercised_stock_options, fraction_to_poi and shared_receipt_with_poi.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [18]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># Not restricting the maximum width in characters of a column</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_colwidth</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"Algorithms"</span><span class="p">:[</span><span class="s2">"DecisionTreeClassifier"</span><span class="p">,</span> 
                      <span class="s2">"RandomForestClassifier"</span><span class="p">,</span>
                      <span class="s2">"AdaBoostClassifier"</span><span class="p">,</span>
                      <span class="s2">"GaussianNB"</span><span class="p">],</span>
        <span class="s2">"Parameters"</span><span class="p">:[</span><span class="s2">"criterion='entropy', max_depth =2, min_samples_split=2, min_samples_leaf=6"</span><span class="p">,</span> 
                      <span class="s2">"n_estimators=150, min_samples_split=5"</span><span class="p">,</span> 
                      <span class="s2">"n_estimators=150"</span><span class="p">,</span>
                      <span class="s2">"Default"</span><span class="p">],</span>
        <span class="s2">"Accuracy"</span><span class="p">:[</span><span class="mf">0.83962</span><span class="p">,</span><span class="mf">0.85031</span><span class="p">,</span><span class="mf">0.81823</span><span class="p">,</span><span class="mf">0.82769</span><span class="p">],</span> 
        <span class="s2">"Precision"</span><span class="p">:[</span> <span class="mf">0.47848</span><span class="p">,</span><span class="mf">0.52246</span><span class="p">,</span><span class="mf">0.40066</span><span class="p">,</span><span class="mf">0.41215</span><span class="p">],</span> 
        <span class="s2">"Recall"</span><span class="p">:[</span><span class="mf">0.47250</span><span class="p">,</span><span class="mf">0.31400</span><span class="p">,</span><span class="mf">0.36600</span><span class="p">,</span><span class="mf">0.28150</span><span class="p">],</span> 
        <span class="s2">"F1"</span><span class="p">:[</span><span class="mf">0.47547</span><span class="p">,</span><span class="mf">0.39225</span><span class="p">,</span><span class="mf">0.38255</span><span class="p">,</span><span class="mf">0.33452</span><span class="p">],</span> 
        <span class="s2">"F2"</span><span class="p">:[</span><span class="mf">0.47368</span><span class="p">,</span><span class="mf">0.34123</span><span class="p">,</span><span class="mf">0.37244</span><span class="p">,</span><span class="mf">0.30056</span><span class="p">]}</span>
<span class="n">algorithms</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Algorithms"</span><span class="p">,</span> <span class="s2">"Parameters"</span><span class="p">,</span> <span class="s2">"Accuracy"</span><span class="p">,</span> <span class="s2">"Precision"</span><span class="p">,</span> <span class="s2">"Recall"</span><span class="p">,</span> <span class="s2">"F1"</span><span class="p">,</span> <span class="s2">"F2"</span><span class="p">])</span>
<span class="n">algorithms</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[18]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Algorithms</th>
<th>Parameters</th>
<th>Accuracy</th>
<th>Precision</th>
<th>Recall</th>
<th>F1</th>
<th>F2</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>DecisionTreeClassifier</td>
<td>criterion='entropy', max_depth =2, min_samples_split=2, min_samples_leaf=6</td>
<td>0.83962</td>
<td>0.47848</td>
<td>0.4725</td>
<td>0.47547</td>
<td>0.47368</td>
</tr>
<tr>
<th>1</th>
<td>RandomForestClassifier</td>
<td>n_estimators=150, min_samples_split=5</td>
<td>0.85031</td>
<td>0.52246</td>
<td>0.3140</td>
<td>0.39225</td>
<td>0.34123</td>
</tr>
<tr>
<th>2</th>
<td>AdaBoostClassifier</td>
<td>n_estimators=150</td>
<td>0.81823</td>
<td>0.40066</td>
<td>0.3660</td>
<td>0.38255</td>
<td>0.37244</td>
</tr>
<tr>
<th>3</th>
<td>GaussianNB</td>
<td>Default</td>
<td>0.82769</td>
<td>0.41215</td>
<td>0.2815</td>
<td>0.33452</td>
<td>0.30056</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p>What does it mean to tune the parameters of an algorithm, and what can happen if you don’t do this well?  How did you tune the parameters of your particular algorithm?</p>
</blockquote>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Hyperparameter-optimization">Hyperparameter optimization<a class="anchor-link" href="#Hyperparameter-optimization">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Parameter tuning for an algorithm means selecting the good and robust parameter or set of parameters for an algorithm to optimize its performance. Default parameters may not be customized very well for the particular dataset features and might result in poor performance. Scikit learn provides two methods for algorithm parameter tuning/Hyperparameter optimization- GridSearchCV and RandomizedSearchCV.</p>
<p>I used GridSearchCV to do exhaustive search over different parameters and find the best parameters.</p>
<ol>
<li><p>I used the <a href="https://www.quora.com/What-is-an-intuitive-explanation-of-F-score">'f1'</a> as my "scoring" parameter to guide the parameter search process to minimize False positives and False negatives.</p>
</li>
<li><p>In the "cv" parameter, I passed a cross validation object (<a href="http://scikit-learn.org/stable/modules/cross_validation.html">StratifiedShuffleSplit</a>) to validate my search results that best adapt to my dataset characteristics.</p>
</li>
<li><p>For my final DecisionTreeClassiifer I tweaked the parameters as shown below :-</p>
</li>
</ol>
<pre><code># Specify parameters of the algorithm
clf_params= {'criterion': ['gini', 'entropy'],
             'max_depth': [None, 1, 2, 5, 10],
             'min_samples_split': [2, 3, 4, 5],
             'min_samples_leaf': [1, 2, 3, 4, 5, 6, 7, 8]
            }

# Specify algorithm
dt = DecisionTreeClassifier()

# GridSearchCV
cv = StratifiedShuffleSplit(labels, n_iter = 1000,random_state = 42)
clf = GridSearchCV(dt, param_grid = clf_params,cv = cv, scoring = 'f1')
clf.fit(features,labels)

# pick a winner
best_clf = clf.best_estimator_
print best_clf</code></pre>
<p><a href="http://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeClassifier.html"><strong>max_depth</strong></a> determines when the splitting of decision tree node stops. <a href="http://scikitlearn.org/stable/modules/generated/sklearn.tree.DecisionTreeClassifier.html"><strong>min_samples_split</strong></a> monitors the amount of observations in an internal node; if a certain threshold is not reached (e.g min 5 people) no further splitting can be done. Very deep trees fit to quirks in data and perform well on training data, but will perform worse on test (unseen) data. We want our model to generalize better.</p>
<p>An example of how my F1-score varied while changing the 'max_depth' parameter of my final DecisionTreeClassifier, while keeping 'min_sample_split' constant at 5. F1-score was obtained using <a href="https://github.com/arjan-hada/Udacity-Data-Analyst/blob/master/P5-Identify-Enron-Fraud/final_project/tester.py">tester.py</a> module.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [19]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">from</span> <span class="nn">bkcharts</span> <span class="kn">import</span> <span class="n">Scatter</span><span class="p">,</span> <span class="n">show</span>

<span class="n">max_depth</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">20</span><span class="p">]</span>
<span class="n">F1_score</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.06125</span><span class="p">,</span> <span class="mf">0.21550</span><span class="p">,</span> <span class="mf">0.39598</span><span class="p">,</span> <span class="mf">0.41575</span><span class="p">,</span> <span class="mf">0.41767</span><span class="p">,</span> <span class="mf">0.42029</span><span class="p">]</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'max_depth'</span><span class="p">:</span><span class="n">max_depth</span><span class="p">,</span> <span class="s1">'F1-score'</span><span class="p">:</span><span class="n">F1_score</span><span class="p">}</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">Scatter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">'max_depth'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">'F1-score'</span><span class="p">,</span> 
            <span class="n">title</span><span class="o">=</span><span class="s2">"DecisionTreeClassifier(max_depth = x, min_samples_split=5)"</span><span class="p">,</span>
            <span class="n">xlabel</span><span class="o">=</span><span class="s2">"max_depth"</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">"F1-score"</span><span class="p">,</span> 
            <span class="n">plot_width</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span> <span class="n">plot_height</span> <span class="o">=</span> <span class="mi">400</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea ">
<div class="bk-root">
<div class="bk-plotdiv" id="23d46bb2-ff88-4cb4-87d3-f2db45c6ab73"></div>
</div>
<script type="text/javascript">
  
  (function(global) {
    function now() {
      return new Date();
    }
  
    var force = false;
  
    if (typeof (window._bokeh_onload_callbacks) === "undefined" || force === true) {
      window._bokeh_onload_callbacks = [];
      window._bokeh_is_loading = undefined;
    }
  
  
    
    if (typeof (window._bokeh_timeout) === "undefined" || force === true) {
      window._bokeh_timeout = Date.now() + 0;
      window._bokeh_failed_load = false;
    }
  
    var NB_LOAD_WARNING = {'data': {'text/html':
       "<div style='background-color: #fdd'>\n"+
       "<p>\n"+
       "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
       "may be due to a slow or bad network connection. Possible fixes:\n"+
       "</p>\n"+
       "<ul>\n"+
       "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
       "<li>use INLINE resources instead, as so:</li>\n"+
       "</ul>\n"+
       "<code>\n"+
       "from bokeh.resources import INLINE\n"+
       "output_notebook(resources=INLINE)\n"+
       "</code>\n"+
       "</div>"}};
  
    function display_loaded() {
      if (window.Bokeh !== undefined) {
        var el = document.getElementById("23d46bb2-ff88-4cb4-87d3-f2db45c6ab73");
        el.textContent = "BokehJS " + Bokeh.version + " successfully loaded.";
      } else if (Date.now() < window._bokeh_timeout) {
        setTimeout(display_loaded, 100)
      }
    }
  
    function run_callbacks() {
      try {
        window._bokeh_onload_callbacks.forEach(function(callback) { callback() });
      }
      finally {
        delete window._bokeh_onload_callbacks
      }
      console.info("Bokeh: all callbacks have finished");
    }
  
    function load_libs(js_urls, callback) {
      window._bokeh_onload_callbacks.push(callback);
      if (window._bokeh_is_loading > 0) {
        console.log("Bokeh: BokehJS is being loaded, scheduling callback at", now());
        return null;
      }
      if (js_urls == null || js_urls.length === 0) {
        run_callbacks();
        return null;
      }
      console.log("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
      window._bokeh_is_loading = js_urls.length;
      for (var i = 0; i < js_urls.length; i++) {
        var url = js_urls[i];
        var s = document.createElement('script');
        s.src = url;
        s.async = false;
        s.onreadystatechange = s.onload = function() {
          window._bokeh_is_loading--;
          if (window._bokeh_is_loading === 0) {
            console.log("Bokeh: all BokehJS libraries loaded");
            run_callbacks()
          }
        };
        s.onerror = function() {
          console.warn("failed to load library " + url);
        };
        console.log("Bokeh: injecting script tag for BokehJS library: ", url);
        document.getElementsByTagName("head")[0].appendChild(s);
      }
    };var element = document.getElementById("23d46bb2-ff88-4cb4-87d3-f2db45c6ab73");
    if (element == null) {
      console.log("Bokeh: ERROR: autoload.js configured with elementid '23d46bb2-ff88-4cb4-87d3-f2db45c6ab73' but no matching script tag was found. ")
      return false;
    }
  
    var js_urls = [];
  
    var inline_js = [
      function(Bokeh) {
        (function() {
          var fn = function() {
            var docs_json = {"6541eb91-c09c-4df1-9e38-f40cac7807a9":{"roots":{"references":[{"attributes":{"data_source":{"id":"387028c7-66c9-42c7-9f01-94ecd7dd9ecc","type":"ColumnDataSource"},"glyph":{"id":"b63ecf1c-a8ea-45b4-bf70-1b0e5417d5fd","type":"Circle"},"hover_glyph":null,"muted_glyph":null},"id":"05ae91b8-812d-44fb-9839-6d37e7c7fa4f","type":"GlyphRenderer"},{"attributes":{},"id":"51210e9e-8b6e-4e98-b7ce-7b7f209a50ba","type":"BasicTicker"},{"attributes":{"location":"top_left","plot":{"id":"4db88aff-fe59-4fb5-b1f4-17562c3d3357","subtype":"Chart","type":"Plot"}},"id":"98182724-8e8c-424a-8334-4299b17e04bd","type":"Legend"},{"attributes":{},"id":"e6efb2b7-5951-4bd0-a5f1-748e9335aa71","type":"LinearScale"},{"attributes":{"plot":{"id":"4db88aff-fe59-4fb5-b1f4-17562c3d3357","subtype":"Chart","type":"Plot"},"ticker":{"id":"bc784e04-496e-4ed6-95fe-77f6b449bf4c","type":"BasicTicker"}},"id":"ca337439-3892-4e96-8250-fcd87a97166b","type":"Grid"},{"attributes":{"below":[{"id":"a93de768-f8d3-4aec-90f1-faf2cf87208b","type":"LinearAxis"}],"css_classes":null,"left":[{"id":"f82bd2e3-2e8f-48ef-a4e2-cb3e1ebb543c","type":"LinearAxis"}],"plot_height":400,"plot_width":500,"renderers":[{"id":"bf261506-e03d-44cd-a7e2-505a638a6d6f","type":"BoxAnnotation"},{"id":"05ae91b8-812d-44fb-9839-6d37e7c7fa4f","type":"GlyphRenderer"},{"id":"98182724-8e8c-424a-8334-4299b17e04bd","type":"Legend"},{"id":"a93de768-f8d3-4aec-90f1-faf2cf87208b","type":"LinearAxis"},{"id":"f82bd2e3-2e8f-48ef-a4e2-cb3e1ebb543c","type":"LinearAxis"},{"id":"ca337439-3892-4e96-8250-fcd87a97166b","type":"Grid"},{"id":"73fd86e5-8839-4b85-bbc6-53534a2130fe","type":"Grid"}],"title":{"id":"6ca61562-c0f1-4270-9a26-b8042aa5e5eb","type":"Title"},"tool_events":{"id":"d0b19c0e-fcaf-4f80-a008-de87509300f9","type":"ToolEvents"},"toolbar":{"id":"637c697c-d804-4539-8487-2e2e5487215c","type":"Toolbar"},"x_range":{"id":"3ecb8c66-3162-4331-b49e-1d92a749b502","type":"Range1d"},"x_scale":{"id":"1c7fa68f-b830-496a-978f-009881a5376f","type":"LinearScale"},"y_range":{"id":"cabca773-299a-4405-921f-590070a8171f","type":"Range1d"},"y_scale":{"id":"e6efb2b7-5951-4bd0-a5f1-748e9335aa71","type":"LinearScale"}},"id":"4db88aff-fe59-4fb5-b1f4-17562c3d3357","subtype":"Chart","type":"Plot"},{"attributes":{},"id":"1c7fa68f-b830-496a-978f-009881a5376f","type":"LinearScale"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_scroll":"auto","active_tap":"auto","tools":[{"id":"378d0a21-376b-441a-9691-d0a53e5a348b","type":"PanTool"},{"id":"6a374f66-4479-4d0a-9b13-a15b97d15890","type":"WheelZoomTool"},{"id":"91ceb27c-0714-499f-af61-db1aadbe07b3","type":"BoxZoomTool"},{"id":"3ae3e91b-babe-4734-9ebb-4e1e9d30e928","type":"SaveTool"},{"id":"8c33d01f-9b6c-46ba-a8d1-ed494b3a4b24","type":"ResetTool"},{"id":"ae2efcff-1959-4216-a7a3-fa817aed8a9f","type":"HelpTool"}]},"id":"637c697c-d804-4539-8487-2e2e5487215c","type":"Toolbar"},{"attributes":{},"id":"d0b19c0e-fcaf-4f80-a008-de87509300f9","type":"ToolEvents"},{"attributes":{},"id":"bc784e04-496e-4ed6-95fe-77f6b449bf4c","type":"BasicTicker"},{"attributes":{},"id":"d6ca821b-4748-419f-b711-5bc7aa7ea179","type":"BasicTickFormatter"},{"attributes":{"callback":null,"column_names":["x_values","y_values"],"data":{"chart_index":[null,null,null,null,null,null],"x_values":[1,2,5,10,15,20],"y_values":{"__ndarray__":"XI/C9Shcrz8v3SQGgZXLP2Svd3+8V9k/z/dT46Wb2j/sTKHzGrvaP2d+NQcI5to/","dtype":"float64","shape":[6]}}},"id":"387028c7-66c9-42c7-9f01-94ecd7dd9ecc","type":"ColumnDataSource"},{"attributes":{},"id":"d0fe547b-a200-407a-bd28-22dbb80d23c8","type":"BasicTickFormatter"},{"attributes":{"plot":{"id":"4db88aff-fe59-4fb5-b1f4-17562c3d3357","subtype":"Chart","type":"Plot"}},"id":"ae2efcff-1959-4216-a7a3-fa817aed8a9f","type":"HelpTool"},{"attributes":{"plot":{"id":"4db88aff-fe59-4fb5-b1f4-17562c3d3357","subtype":"Chart","type":"Plot"}},"id":"378d0a21-376b-441a-9691-d0a53e5a348b","type":"PanTool"},{"attributes":{"overlay":{"id":"bf261506-e03d-44cd-a7e2-505a638a6d6f","type":"BoxAnnotation"},"plot":{"id":"4db88aff-fe59-4fb5-b1f4-17562c3d3357","subtype":"Chart","type":"Plot"}},"id":"91ceb27c-0714-499f-af61-db1aadbe07b3","type":"BoxZoomTool"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"plot":null,"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"bf261506-e03d-44cd-a7e2-505a638a6d6f","type":"BoxAnnotation"},{"attributes":{"plot":{"id":"4db88aff-fe59-4fb5-b1f4-17562c3d3357","subtype":"Chart","type":"Plot"}},"id":"8c33d01f-9b6c-46ba-a8d1-ed494b3a4b24","type":"ResetTool"},{"attributes":{"axis_label":"F1-score","formatter":{"id":"d0fe547b-a200-407a-bd28-22dbb80d23c8","type":"BasicTickFormatter"},"plot":{"id":"4db88aff-fe59-4fb5-b1f4-17562c3d3357","subtype":"Chart","type":"Plot"},"ticker":{"id":"51210e9e-8b6e-4e98-b7ce-7b7f209a50ba","type":"BasicTicker"}},"id":"f82bd2e3-2e8f-48ef-a4e2-cb3e1ebb543c","type":"LinearAxis"},{"attributes":{"dimension":1,"plot":{"id":"4db88aff-fe59-4fb5-b1f4-17562c3d3357","subtype":"Chart","type":"Plot"},"ticker":{"id":"51210e9e-8b6e-4e98-b7ce-7b7f209a50ba","type":"BasicTicker"}},"id":"73fd86e5-8839-4b85-bbc6-53534a2130fe","type":"Grid"},{"attributes":{"fill_alpha":{"value":0.7},"fill_color":{"value":"#f22c40"},"line_color":{"value":"#f22c40"},"size":{"units":"screen","value":8},"x":{"field":"x_values"},"y":{"field":"y_values"}},"id":"b63ecf1c-a8ea-45b4-bf70-1b0e5417d5fd","type":"Circle"},{"attributes":{"plot":null,"text":"DecisionTreeClassifier(max_depth = x, min_samples_split=5)"},"id":"6ca61562-c0f1-4270-9a26-b8042aa5e5eb","type":"Title"},{"attributes":{"plot":{"id":"4db88aff-fe59-4fb5-b1f4-17562c3d3357","subtype":"Chart","type":"Plot"}},"id":"6a374f66-4479-4d0a-9b13-a15b97d15890","type":"WheelZoomTool"},{"attributes":{"plot":{"id":"4db88aff-fe59-4fb5-b1f4-17562c3d3357","subtype":"Chart","type":"Plot"}},"id":"3ae3e91b-babe-4734-9ebb-4e1e9d30e928","type":"SaveTool"},{"attributes":{"axis_label":"max_depth","formatter":{"id":"d6ca821b-4748-419f-b711-5bc7aa7ea179","type":"BasicTickFormatter"},"plot":{"id":"4db88aff-fe59-4fb5-b1f4-17562c3d3357","subtype":"Chart","type":"Plot"},"ticker":{"id":"bc784e04-496e-4ed6-95fe-77f6b449bf4c","type":"BasicTicker"}},"id":"a93de768-f8d3-4aec-90f1-faf2cf87208b","type":"LinearAxis"},{"attributes":{"callback":null,"end":0.456194,"start":0.025345999999999994},"id":"cabca773-299a-4405-921f-590070a8171f","type":"Range1d"},{"attributes":{"callback":null,"end":21.9,"start":-0.9000000000000001},"id":"3ecb8c66-3162-4331-b49e-1d92a749b502","type":"Range1d"}],"root_ids":["4db88aff-fe59-4fb5-b1f4-17562c3d3357"]},"title":"Bokeh Application","version":"0.12.6"}};
            var render_items = [{"docid":"6541eb91-c09c-4df1-9e38-f40cac7807a9","elementid":"23d46bb2-ff88-4cb4-87d3-f2db45c6ab73","modelid":"4db88aff-fe59-4fb5-b1f4-17562c3d3357"}];
            
            Bokeh.embed.embed_items(docs_json, render_items);
          };
          if (document.readyState != "loading") fn();
          else document.addEventListener("DOMContentLoaded", fn);
        })();
      },
      function(Bokeh) {
      }
    ];
  
    function run_inline_js() {
      
      if ((window.Bokeh !== undefined) || (force === true)) {
        for (var i = 0; i < inline_js.length; i++) {
          inline_js[i](window.Bokeh);
        }if (force === true) {
          display_loaded();
        }} else if (Date.now() < window._bokeh_timeout) {
        setTimeout(run_inline_js, 100);
      } else if (!window._bokeh_failed_load) {
        console.log("Bokeh: BokehJS failed to load within specified timeout.");
        window._bokeh_failed_load = true;
      } else if (force !== true) {
        var cell = $(document.getElementById("23d46bb2-ff88-4cb4-87d3-f2db45c6ab73")).parents('.cell').data().cell;
        cell.output_area.append_execute_result(NB_LOAD_WARNING)
      }
  
    }
  
    if (window._bokeh_is_loading === 0) {
      console.log("Bokeh: BokehJS loaded, going straight to plotting");
      run_inline_js();
    } else {
      load_libs(js_urls, function() {
        console.log("Bokeh: BokehJS plotting callback run at", now());
        run_inline_js();
      });
    }
  }(this));
</script>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Validate-and-Evaluate">Validate and Evaluate<a class="anchor-link" href="#Validate-and-Evaluate">¶</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p>What is validation, and what’s a classic mistake you can make if you do it wrong? How did you validate your analysis?</p>
</blockquote>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Validation</strong> is the strategy to evaluate the performance of the model on unseen data. A classic mistake is to evaluate the performance of an algorithm on the same dataset it was trained on. It will make our algorithm perform better than it actually does. This is called <strong>overfitting</strong>. However, we will have no idea how our algorithm performs on unseen data. We want an algorithm that generalizes well to new data.</p>
<p>We can avoid overfitting by randomly splitting our data into training and testing set. This is called crossvalidation. However, with a small dataset like ours, we run into the dilemma of maximizing the training set vs test set. So, I ended up using <a href="http://scikit-learn.org/stable/modules/cross_validation.html"><strong>StratifiedShuffleSplit</strong></a>. StratifiedShuffleSplit will make randomly chosen training and test sets multiple times and average the results over all the tests. Data is first shuffled and then split into a pair of training and test sets. Stratification ensures training and test splits have class distribution (POI:Non-POI) that represents the overall data. Stratification is well suited in our case because of class imbalance (18 POI vs 128 Non-POI).</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p>Give at least 2 evaluation metrics and your average performance for each of them.  Explain an interpretation of your metrics that says something human-understandable about your algorithm’s performance.</p>
</blockquote>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There are a number of evaluation metrics for classification challenges. In <strong>balanced classes</strong>, where all the labels are equally represented, we look at the classification accuracy of the model.</p>
$$Accuracy = \frac{Number\ of\ labels\ predicted\ correctly}{Total\ number\ of\ predicitions} = \frac{True\ Positives +True\ Negatives}{Total\ Predictions}$$<p>However, accuracy is not ideal for skewed classes. In our case, number of POI are small compared to non-POI (18 vs 128). We can have high accuracy by classifying many non-POI correctly and still not have a POI classiifed correctly.
For imbalanced classes like we have, <strong>Precision</strong> and <strong>Recall</strong> are common measures of model performance.</p>
$$Precision = \frac{True\ Positive}{True\ Positive + False\ Positive}\ \ \ \ \ Recall = \frac{True\ Positive}{True\ Positive + False\ Negative}$$<p>A <strong>good precision</strong> means that whenever a POI gets flagged in my test set, I know with a lot of confidence that it's very likely to be a real POI and not a false alarm. A low precision indicates a large number of False Positives, where non-POI gets flagged as POI.</p>
<p>A <strong>good recall</strong> means nearly I am able to identify a POI everytime it shows up in test cases. A low recall indicates many False Negatives, where POIs don't get flagged correctly.</p>
<p>F1 score conveys a balance between precision and recall. It is the harmonic mean of precision and recall.</p>
$$F1\ score = \frac{2*(precision*recall)}{precision + recall}$$<p>A <strong>good F1 score</strong> means both my false positives and false negatives are low, I can identify my POI's reliably and accurately. If my classifier flags a POI then the person is almost certainly a POI, and if the classifier does not flag someone, then they are almost certainly not a POI.</p>
<p>The <strong>F2-Score</strong> is a weighted average of precision and recall:</p>
$$F2\ score = \frac{5*(precision*recall)}{4*precision + recall}$$
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Algorithm-Performance">Algorithm Performance<a class="anchor-link" href="#Algorithm-Performance">¶</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [20]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">DecisionTreeClassifier</span>

<span class="n">clf</span> <span class="o">=</span> <span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">criterion</span><span class="o">=</span><span class="s1">'entropy'</span><span class="p">,</span> <span class="n">max_depth</span> <span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">min_samples_split</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">min_samples_leaf</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [21]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">dump_classifier_and_data</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">my_dataset</span><span class="p">,</span> <span class="n">features_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [22]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># Get confusion matrix (cm)</span>
<span class="kn">from</span> <span class="nn">tester_plus</span> <span class="kn">import</span> <span class="n">test_classifier</span>
<span class="n">cm</span> <span class="o">=</span> <span class="n">test_classifier</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">my_dataset</span><span class="p">,</span> <span class="n">features_list</span><span class="p">)</span>

<span class="c1"># Seaborn and matplotlib library</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="kn">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="c1"># View confusion matrix with a heatmap</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">cm</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fmt</span> <span class="o">=</span> <span class="s1">'d'</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">'Reds'</span><span class="p">,</span> <span class="n">xticklabels</span><span class="o">=</span><span class="p">[</span><span class="s1">'no'</span><span class="p">,</span> <span class="s1">'yes'</span><span class="p">],</span> <span class="n">yticklabels</span><span class="o">=</span><span class="p">[</span><span class="s1">'no'</span><span class="p">,</span> <span class="s1">'yes'</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'True label'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'Predicted label'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">'Confusion matrix for:</span><span class="se">\n</span><span class="s1">{}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">clf</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">));</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>DecisionTreeClassifier(class_weight=None, criterion='entropy', max_depth=2,
            max_features=None, max_leaf_nodes=None,
            min_impurity_split=1e-07, min_samples_leaf=6,
            min_samples_split=2, min_weight_fraction_leaf=0.0,
            presort=False, random_state=None, splitter='best')
Feature importances [ 0.13511765  0.04337189  0.48606534  0.33544513]
Accuracy: 0.83915	Precision: 0.47703	Recall: 0.47250	F1: 0.47476	F2: 0.47340
Total predictions: 13000	True positives:  945	False positives: 1036	False negatives: 1055	True negatives: 9964

</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
" />
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Reference">Reference<a class="anchor-link" href="#Reference">¶</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>1) <a href="https://www.udacity.com/course/intro-to-machine-learning--ud120">Udacity's Intro to Machine Learning</a><br />
2) <a href="https://en.wikipedia.org/wiki/Enron">Enron wiki</a><br />
3) <a href="http://scikit-learn.org/stable/">scikit-learn</a><br />
4) <a href="https://plot.ly/pandas/line-and-scatter/">Plotly Scatterplot</a><br />
5) <a href="http://bokeh.pydata.org/en/latest/docs/user_guide/annotations.html#legends">Bokeh Scatterplot</a><br />
6) <a href="http://bokeh.pydata.org/en/latest/docs/user_guide/charts.html#bar-charts">Bokeh Barchart</a><br />
7) <a href="http://chris-said.io/2016/02/13/how-to-make-polished-jupyter-presentations-with-optional-code-visibility/">Optional code visibility</a></p>
</div>
</div>
</div><script>
  $(document).ready(function(){
    $('div.prompt').hide();
    $('div.back-to-top').hide();
    $('nav#menubar').hide();
    $('.breadcrumb').hide();
    $('.hidden-print').hide();
  });
</script>
<footer id="attribution" style="float:right; color:#999; background:#fff;">
<p>Created with Jupyter, delivered by Fastly, rendered by Rackspace.</p>
<p>November 26, 2016</p>
<p>Contact author: <a href="mailto:hadaarjan@gmail.com">
  hadaarjan@gmail.com</a></p>
</footer>

<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        " linebreaks: { automatic: true, width: '95% container' }, " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>

    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>